<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ูุธุงู ุฅุฏุงุฑุฉ ุงูุฃุนุถุงุก ูุงูุญุถูุฑ</title>
<style>
body { font-family: Arial, sans-serif; background: #f5f5f5; margin:0; padding:0; }
.container { max-width: 1200px; margin: auto; padding: 20px; }
table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
table, th, td { border: 1px solid #ccc; }
th, td { padding: 10px; text-align: center; }
.btn { padding: 5px 10px; border: none; cursor: pointer; border-radius: 5px; }
.btn-primary { background: #3498db; color: white; }
.btn-danger { background: #e74c3c; color: white; }
.btn-warning { background: #f1c40f; color: white; }
.small-btn { padding: 3px 7px; font-size: 0.85em; }
.member-img { width: 30px; height: 30px; border-radius: 50%; vertical-align: middle; margin-right: 5px; }
.notification { position: fixed; top: 20px; right: 20px; padding: 15px; color: white; border-radius: 5px; display: none; z-index: 1000; }
.tabs { display: flex; margin-bottom: 10px; }
.tab { padding: 10px 20px; background: #ddd; cursor: pointer; margin-right: 5px; border-radius: 5px 5px 0 0; }
.tab.active { background: #3498db; color: white; }
.tab-content { display: none; padding: 10px; background: white; border-radius: 0 5px 5px 5px; }
.tab-content.active { display: block; }
.points-breakdown { margin-bottom: 15px; background: #f0f0f0; padding: 10px; border-radius: 5px; }
.top-member-item { display: flex; justify-content: space-between; padding: 5px 0; }
.medal { margin-right: 5px; }
.login-failed { border: 2px solid red; }
.auto-points-notification { background: #9b59b6 !important; }
</style>
</head>
<body>
<div class="container">

<h1>ูุธุงู ุฅุฏุงุฑุฉ ุงูุฃุนุถุงุก ูุงูุญุถูุฑ</h1>

<!-- ุฅุดุนุงุฑุงุช -->
<div id="notification" class="notification"></div>

<!-- ุชุณุฌูู ุฏุฎูู ุงูุฃุฏูู -->
<button id="adminLoginBtn" class="btn btn-primary">ุชุณุฌูู ุฏุฎูู ุงูุฃุฏูู</button>
<button id="adminLogoutBtn" class="btn btn-danger" style="display:none;">ุชุณุฌูู ุฎุฑูุฌ ุงูุฃุฏูู</button>

<div id="adminLoginModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); align-items:center; justify-content:center;">
<div style="background:white; padding:20px; border-radius:5px; min-width:300px;">
<h3>ุชุณุฌูู ุฏุฎูู ุงูุฃุฏูู</h3>
<input type="password" id="adminPassword" placeholder="ูููุฉ ุงููุฑูุฑ" style="width:100%; padding:5px; margin-bottom:10px;">
<div style="text-align:right;">
<button id="confirmAdminLogin" class="btn btn-primary">ุชุฃููุฏ</button>
<button id="cancelAdminLogin" class="btn btn-danger">ุฅูุบุงุก</button>
</div>
</div>
</div>

<!-- ูุงุฌูุฉ ุงููุณุชุฎุฏู -->
<div id="userAttendance">
<h2>ุชุณุฌูู ุงูุญุถูุฑ</h2>
<select id="selectMember"></select>
<select id="weekSelect"></select>
<button id="markPresent" class="btn btn-primary">ุชุณุฌูู ุญุถูุฑ</button>
<button id="addExtraPointsBtn" class="btn btn-warning">ุฅุถุงูุฉ ููุงุท ุฅุถุงููุฉ</button>
<input type="number" id="extraPointsValue" value="1" min="1" style="width:50px;">
<input type="text" id="extraPointsReason" placeholder="ุงูุณุจุจ">
<select id="extraPointMember"></select>
<button id="deleteAttendanceBtn" class="btn btn-danger">ุญุฐู ูู ุงูุญุถูุฑ ูุฃุณุจูุน</button>
<select id="deleteWeekSelect"></select>

<h3>ุฌุฏูู ุงูุญุถูุฑ</h3>
<table>
<thead>
<tr>
<th>#</th><th>ุตูุฑุฉ</th><th>ุงูุงุณู</th><th>ุงูุฃุณุจูุน</th><th>ุงูุญุถูุฑ</th><th>ุงูููุงุท</th><th class="admin-only">ุฃูุนุงู</th>
</tr>
</thead>
<tbody id="attendanceTableBody"></tbody>
</table>

<h3>ุงูุฅุญุตุงุฆูุงุช</h3>
<p>ุฅุฌูุงูู ุงูุญุถูุฑ: <span id="attendanceCount">0</span></p>
<p>ุฅุฌูุงูู ุงูุฃุนุถุงุก: <span id="totalMembers">0</span></p>
<p>ุฅุฌูุงูู ุงูููุงุท: <span id="totalPoints">0</span></p>
</div>

<!-- ุชุจููุจุงุช ุงูุฃุฏูู -->
<div id="adminTabs" style="display:none;">
<div class="tabs">
<div class="tab active" data-tab="membersTab">ุงูุฃุนุถุงุก</div>
<div class="tab" data-tab="weeksTab">ุงูุฃุณุงุจูุน</div>
<div class="tab" data-tab="competitions">ุงููุณุงุจูุงุช</div>
<div class="tab" data-tab="eventsTab">ุงูููุงุณุจุงุช</div>
<div class="tab" data-tab="tasksTab">ุงูููุงู</div>
</div>

<!-- ูุญุชูู ุงูุฃุนุถุงุก -->
<div id="membersTab" class="tab-content active">
<h3>ุงูุฃุนุถุงุก</h3>
<input type="text" id="newMemberName" placeholder="ุงุณู ุงูุนุถู">
<select id="newMemberEmoji">
<option value="๐">๐</option>
<option value="๐">๐</option>
<option value="๐งโ๐ป">๐งโ๐ป</option>
<option value="๐คฉ">๐คฉ</option>
</select>
<button id="addMemberBtn" class="btn btn-primary">ุฅุถุงูุฉ ุนุถู</button>

<table id="membersTable">
<thead>
<tr>
<th>#</th><th>ุงูุงุณู</th><th>ุงูููุงุท</th><th>ุชุนุฏูู/ุญุฐู ููุงุท</th><th>ุชุนุฏูู</th><th>ุญุฐู</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>

<!-- ูุญุชูู ุงูุฃุณุงุจูุน -->
<div id="weeksTab" class="tab-content">
<h3>ุงูุฃุณุงุจูุน</h3>
<input type="text" id="newWeekName" placeholder="ุงุณู ุงูุฃุณุจูุน">
<button id="addWeekBtn" class="btn btn-primary">ุฅุถุงูุฉ ุฃุณุจูุน</button>

<table id="weeksTable">
<thead>
<tr>
<th>#</th><th>ุงูุงุณู</th><th>ุชุนุฏูู</th><th>ุญุฐู</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>

<!-- ูุญุชูู ุงููุณุงุจูุงุช -->
<div id="competitions" class="tab-content">
<h3>ุงููุณุงุจูุงุช</h3>
<input type="text" id="newCompetitionName" placeholder="ุงุณู ุงููุณุงุจูุฉ">
<select id="competitionWinner"></select>
<input type="number" id="competitionPoints" value="5" min="1">
<button id="addCompetitionBtn" class="btn btn-primary">ุฅุถุงูุฉ ูุณุงุจูุฉ</button>

<table id="competitionsTable">
<thead>
<tr>
<th>#</th><th>ุงููุณุงุจูุฉ</th><th>ุงููุงุฆุฒ</th><th>ุงูููุงุท</th><th>ุงูุชุงุฑูุฎ</th><th>ุญุฐู</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>

<!-- ูุญุชูู ุงูููุงุณุจุงุช -->
<div id="eventsTab" class="tab-content">
<h3>ุงูููุงุณุจุงุช</h3>
<input type="text" id="newEventName" placeholder="ุงุณู ุงูููุงุณุจุฉ">
<input type="date" id="newEventDate">
<input type="text" id="newEventDescription" placeholder="ุงููุตู">
<button id="addEventBtn" class="btn btn-primary">ุฅุถุงูุฉ ููุงุณุจุฉ</button>
</div>

<!-- ูุญุชูู ุงูููุงู -->
<div id="tasksTab" class="tab-content">
<h3>ุงูููุงู</h3>
<input type="text" id="newTaskName" placeholder="ุงุณู ุงููููุฉ">
<select id="newTaskAssignee"></select>
<input type="date" id="newTaskDeadline">
<button id="addTaskBtn" class="btn btn-primary">ุฅุถุงูุฉ ูููุฉ</button>
</div>

<h3>ุฃูุถู 10 ุฃุนุถุงุก</h3>
<div id="topMembersList"></div>

<h3>ุชูุตูู ุงูููุงุท</h3>
<div id="pointsBreakdownContainer"></div>

</div>

<script src="https://www.gstatic.com/firebasejs/9.17.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.17.2/firebase-database-compat.js"></script>
<script>
// ุถุน ุฅุนุฏุงุฏุงุช Firebase ุงูุฎุงุตุฉ ุจู ููุง
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_DOMAIN",
  databaseURL: "YOUR_DB_URL",
  projectId: "YOUR_PROJECT_ID",
  storageBucket: "YOUR_BUCKET",
  messagingSenderId: "YOUR_SENDER_ID",
  appId: "YOUR_APP_ID"
};
firebase.initializeApp(firebaseConfig);
const database = firebase.database();

let members = [];
let weeks = [];
let attendanceRecords = [];
let competitions = [];
let isAdmin = false;
const adminPass = "1234"; // ูููุฉ ุณุฑ ุงูุฃุฏูู

// ุจุงูู ููุฏ JavaScript ููุง ุฃุฑุณูุชูู ุชูุงูุงู ูุน ูู ุงูุชุนุฏููุงุช
// (ุชุญุฏูุซ ุงูุฌุฏุงููุ ุชุณุฌูู ุญุถูุฑุ ุญุฐูุ ุฅุถุงูุฉุ ุชุจููุจุงุชุ ุฅุดุนุงุฑุงุชุ ุฅูุฎ)
</script>
<script>
// ุงูุตู ููุง ูู ุฏูุงูู JS ูู ุงูููุฏ ุงููู ุฃุฑุณูุชูู ุจุงููุงูู
</script>

</div>
</body>
</html>
