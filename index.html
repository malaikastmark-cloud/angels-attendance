  // Ø­Ø°Ù Ù…Ø³Ø§Ø¨Ù‚Ø© - Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù…ØµØ­Ø­
function deleteContest(id) {
    if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©ØŸ Ø³ÙŠØªÙ… Ø®ØµÙ… Ø§Ù„Ù†Ù‚Ø§Ø· Ù…Ù† Ø§Ù„Ø¹Ø¶Ùˆ.')) {
        const contestRef = database.ref('contests/' + id);
        
        contestRef.once('value').then((snapshot) => {
            const contest = snapshot.val();
            if (!contest) return;
            
            const memberRef = database.ref('members/' + contest.memberId);
            memberRef.once('value').then((snapshot) => {
                const memberData = snapshot.val();
                if (memberData) {
                    // Ø®ØµÙ… Ø§Ù„Ù†Ù‚Ø§Ø· Ù…Ø¹ Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… Ø§Ù„Ù†Ø²ÙˆÙ„ ØªØ­Øª Ø§Ù„ØµÙØ±
                    const newPoints = Math.max(0, (memberData.points || 0) - (contest.points || 0));
                    memberRef.update({ points: newPoints })
                        .then(() => {
                            contestRef.remove().then(() => {
                                showNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© ÙˆØ®ØµÙ… Ø§Ù„Ù†Ù‚Ø§Ø· Ù…Ù† Ø§Ù„Ø¹Ø¶Ùˆ');
                            }).catch((error) => {
                                console.error("Error deleting contest:", error);
                                showNotification('ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©: ' + error.message, false);
                            });
                        }).catch((error) => {
                            console.error("Error updating points:", error);
                            showNotification('ÙØ´Ù„ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ù‚Ø§Ø·: ' + error.message, false);
                        });
                } else {
                    // Ø§Ù„Ø¹Ø¶Ùˆ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ => Ø­Ø°Ù Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© ÙÙ‚Ø·
                    contestRef.remove().then(() => {
                        showNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©');
                    }).catch((error) => {
                        console.error("Error deleting contest:", error);
                        showNotification('ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©: ' + error.message, false);
                    });
                }
            });
        });
    }
}

        // ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª
        function updateContestsTable() {
            const tbody = document.querySelector('#contestsTable tbody');
            tbody.innerHTML = '';
            
            if (contests.length === 0) {
                const tr = document.createElement('tr');
                tr.innerHTML = `<td colspan="6" style="text-align:center;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø³Ø§Ø¨Ù‚Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†</td>`;
                tbody.appendChild(tr);
                return;
            }
            
            contests.forEach((contest, index) => {
                const member = members.find(m => m.id === contest.memberId);
                
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td class="member-number">${index + 1}</td>
                    <td>${member ? member.name : 'Ø¹Ø¶Ùˆ Ù…Ø­Ø°ÙˆÙ'}</td>
                    <td>${contest.contestName}</td>
                    <td>${contest.points}</td>
                    <td>${new Date(contest.date).toLocaleDateString('ar-EG')}</td>
                    <td><button class='btn btn-danger deleteContest' data-id='${contest.id}'>Ø­Ø°Ù</button></td>
                `;
                tbody.appendChild(tr);
            });
        }
        
        // Ø¥Ø¶Ø§ÙØ© Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯
        function addBirthday() {
            const memberId = document.getElementById('birthdayMember').value;
            const date = document.getElementById('birthdayDate').value;
            
            if (!memberId || !date) {
                showNotification('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ø¶Ùˆ ÙˆØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯', false);
                return;
            }
            
            const member = members.find(m => m.id === memberId);
            if (!member) {
                showNotification('Ø§Ù„Ø¹Ø¶Ùˆ Ø§Ù„Ù…Ø­Ø¯Ø¯ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯', false);
                return;
            }
            
            const birthdaysRef = database.ref('birthdays');
            const newBirthdayRef = birthdaysRef.push();
            
            newBirthdayRef.set({
                memberId: memberId,
                date: date
            }).then(() => {
                showNotification(`ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯ Ù„Ù€ ${member.name}`);
                
                document.getElementById('birthdayDate').value = '';
            }).catch((error) => {
                console.error("Error adding birthday:", error);
                showNotification('ÙØ´Ù„ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø¹ÙŠØ¯ Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯: ' + error.message, false);
            });
        }
        
        // ØªØ¹Ø¯ÙŠÙ„ Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯
        function editBirthday(id) {
            const birthdayRef = database.ref('birthdays/' + id);
            
            birthdayRef.once('value').then((snapshot) => {
                const birthday = snapshot.val();
                if (!birthday) return;
                
                const newDate = prompt('Ø¹Ø¯Ù„ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯:', birthday.date);
                
                if (newDate) {
                    birthdayRef.update({
                        date: newDate
                    }).then(() => {
                        showNotification('ØªÙ… ØªØ¹Ø¯ÙŠÙ„ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯');
                    }).catch((error) => {
                        console.error("Error updating birthday:", error);
                        showNotification('ÙØ´Ù„ ÙÙŠ ØªØ¹Ø¯ÙŠÙ„ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯: ' + error.message, false);
                    });
                }
            });
        }
        
        // Ø­Ø°Ù Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯
        function deleteBirthday(id) {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ØŸ')) {
                const birthdayRef = database.ref('birthdays/' + id);
                
                birthdayRef.remove().then(() => {
                    showNotification('ØªÙ… Ø­Ø°Ù ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯');
                }).catch((error) => {
                    console.error("Error deleting birthday:", error);
                    showNotification('ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯: ' + error.message, false);
                });
            }
        }
        
        // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ© Ù„Ø¹ÙŠØ¯ Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯
        function daysUntilBirthday(birthdayDate) {
            const today = new Date();
            const nextBirthday = new Date(birthdayDate);
            nextBirthday.setFullYear(today.getFullYear());
            
            if (nextBirthday < today) {
                nextBirthday.setFullYear(today.getFullYear() + 1);
            }
            
            const diffTime = nextBirthday - today;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            return diffDays;
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙˆÙ„ Ø£Ø¹ÙŠØ§Ø¯ Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯
        function updateBirthdaysTable() {
            const tbody = document.querySelector('#birthdaysTable tbody');
            tbody.innerHTML = '';
            
            if (birthdays.length === 0) {
                const tr = document.createElement('tr');
                tr.innerHTML = `<td colspan="6" style="text-align:center;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø¹ÙŠØ§Ø¯ Ù…ÙŠÙ„Ø§Ø¯ Ù…Ø³Ø¬Ù„Ø© Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†</td>`;
                tbody.appendChild(tr);
                return;
            }
            
            birthdays.forEach((birthday, index) => {
                const member = members.find(m => m.id === birthday.memberId);
                const daysLeft = daysUntilBirthday(birthday.date);
                
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td class="member-number">${index + 1}</td>
                    <td>${member ? member.name : 'Ø¹Ø¶Ùˆ Ù…Ø­Ø°ÙˆÙ'}</td>
                    <td>${new Date(birthday.date).toLocaleDateString('ar-EG')}</td>
                    <td>${daysLeft} ÙŠÙˆÙ…</td>
                    <td><button class='btn btn-primary editBirthday' data-id='${birthday.id}'>ØªØ¹Ø¯ÙŠÙ„</button></td>
                    <td><button class='btn btn-danger deleteBirthday' data-id='${birthday.id}'>Ø­Ø°Ù</button></td>
                `;
                tbody.appendChild(tr);
            });
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø£Ø¹ÙŠØ§Ø¯ Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©
        function updateUpcomingBirthdays() {
            const upcomingBirthdaysDiv = document.getElementById('upcomingBirthdays');
            upcomingBirthdaysDiv.innerHTML = '';
            
            if (birthdays.length === 0) {
                upcomingBirthdaysDiv.innerHTML = '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø¹ÙŠØ§Ø¯ Ù…ÙŠÙ„Ø§Ø¯ Ù…Ø³Ø¬Ù„Ø©</p>';
                return;
            }
            
            const today = new Date();
            const upcoming = [];
            
            birthdays.forEach(birthday => {
                const member = members.find(m => m.id === birthday.memberId);
                if (!member) return;
                
                const daysLeft = daysUntilBirthday(birthday.date);
                
                if (daysLeft <= 30) { // Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø¹ÙŠØ§Ø¯ ÙÙŠ Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù‚Ø§Ø¯Ù… ÙÙ‚Ø·
                    upcoming.push({
                        memberName: member.name,
                        date: birthday.date,
                        daysLeft: daysLeft
                    });
                }
            });
            
            // ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©
            upcoming.sort((a, b) => a.daysLeft - b.daysLeft);
            
            if (upcoming.length === 0) {
                upcomingBirthdaysDiv.innerHTML = '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø¹ÙŠØ§Ø¯ Ù…ÙŠÙ„Ø§Ø¯ Ù‚Ø±ÙŠØ¨Ø©</p>';
                return;
            }
            
            upcoming.forEach(bday => {
                const bdayItem = document.createElement('div');
                bdayItem.className = 'birthday-item';
                
                let message = '';
                if (bday.daysLeft === 0) {
                    message = `Ø§Ù„ÙŠÙˆÙ… Ù‡Ùˆ Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯ ${bday.memberName}! ğŸ‰`;
                } else if (bday.daysLeft === 1) {
                    message = `ØºØ¯Ø§Ù‹ Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯ ${bday.memberName}`;
                } else {
                    message = `Ø¨Ø§Ù‚ÙŠ ${bday.daysLeft} ÙŠÙˆÙ… Ø¹Ù„Ù‰ Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯ ${bday.memberName}`;
                }
                
                bdayItem.innerHTML = `
                    <span>${message}</span>
                    <span>${new Date(bday.date).toLocaleDateString('ar-EG')}</span>
                `;
                
                upcomingBirthdaysDiv.appendChild(bdayItem);
            });
        }
        
        // Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø§Ø³Ø¨Ø©
        function addEvent() {
            const name = document.getElementById('newEventName').value;
            const date = document.getElementById('newEventDate').value;
            const description = document.getElementById('newEventDescription').value;
            
            if (!name || !date || !description) {
                showNotification('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„', false);
                return;
            }
            
            const eventsRef = database.ref('events');
            const newEventRef = eventsRef.push();
            
            newEventRef.set({
                name: name,
                date: date,
                description: description
            }).then(() => {
                showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ø¨Ù†Ø¬Ø§Ø­');
                
                document.getElementById('newEventName').value = '';
                document.getElementById('newEventDate').value = '';
                document.getElementById('newEventDescription').value = '';
            }).catch((error) => {
                console.error("Error adding event:", error);
                showNotification('ÙØ´Ù„ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©: ' + error.message, false);
            });
        }
        
        // ØªØ¹Ø¯ÙŠÙ„ Ù…Ù†Ø§Ø³Ø¨Ø©
        function editEvent(id) {
            const eventRef = database.ref('events/' + id);
            
            eventRef.once('value').then((snapshot) => {
                const event = snapshot.val();
                if (!event) return;
                
                const newName = prompt('Ø¹Ø¯Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©:', event.name);
                const newDate = prompt('Ø¹Ø¯Ù„ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©:', event.date);
                const newDescription = prompt('Ø¹Ø¯Ù„ ÙˆØµÙ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©:', event.description);
                
                if (newName && newDate && newDescription) {
                    eventRef.update({
                        name: newName,
                        date: newDate,
                        description: newDescription
                    }).then(() => {
                        showNotification('ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©');
                    }).catch((error) => {
                        console.error("Error updating event:", error);
                        showNotification('ÙØ´Ù„ ÙÙŠ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©: ' + error.message, false);
                    });
                }
            });
        }
        
        // Ø­Ø°Ù Ù…Ù†Ø§Ø³Ø¨Ø©
        function deleteEvent(id) {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©ØŸ')) {
                const eventRef = database.ref('events/' + id);
                
                eventRef.remove().then(() => {
                    showNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©');
                }).catch((error) => {
                    console.error("Error deleting event:", error);
                    showNotification('ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©: ' + error.message, false);
                });
            }
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø§Øª
        function updateEventsTable() {
            const tbody = document.querySelector('#eventsTable tbody');
            tbody.innerHTML = '';
            
            if (events.length === 0) {
                const tr = document.createElement('tr');
                tr.innerHTML = `<td colspan="6" style="text-align:center;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†Ø§Ø³Ø¨Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†</td>`;
                tbody.appendChild(tr);
                return;
            }
            
            events.forEach((event, index) => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td class="member-number">${index + 1}</td>
                    <td>${event.name}</td>
                    <td>${new Date(event.date).toLocaleDateString('ar-EG')}</td>
                    <td>${event.description}</td>
                    <td><button class='btn btn-primary editEvent' data-id='${event.id}'>ØªØ¹Ø¯ÙŠÙ„</button></td>
                    <td><button class='btn btn-danger deleteEvent' data-id='${event.id}'>Ø­Ø°Ù</button></td>
                `;
                tbody.appendChild(tr);
            });
        }
        
        // Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø©
        function addTask() {
            const name = document.getElementById('newTaskName').value;
            const assigneeId = document.getElementById('newTaskAssignee').value;
            const deadline = document.getElementById('newTaskDeadline').value;
            const status = document.getElementById('newTaskStatus').value;
            
            if (!name || !assigneeId || !deadline || !status) {
                showNotification('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„', false);
                return;
            }
            
            const assignee = members.find(m => m.id === assigneeId);
            if (!assignee) {
                showNotification('Ø§Ù„Ø¹Ø¶Ùˆ Ø§Ù„Ù…Ø­Ø¯Ø¯ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯', false);
                return;
            }
            
            const tasksRef = database.ref('tasks');
            const newTaskRef = tasksRef.push();
            
            newTaskRef.set({
                name: name,
                assigneeId: assigneeId,
                assigneeName: assignee.name,
                deadline: deadline,
                status: status
            }).then(() => {
                showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù‡Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­');
                
                document.getElementById('newTaskName').value = '';
                document.getElementById('newTaskAssignee').value = '';
                document.getElementById('newTaskDeadline').value = '';
                document.getElementById('newTaskStatus').value = 'Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°';
            }).catch((error) => {
                console.error("Error adding task:", error);
                showNotification('ÙØ´Ù„ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù‡Ù…Ø©: ' + error.message, false);
            });
        }
        
        // ØªØ¹Ø¯ÙŠÙ„ Ù…Ù‡Ù…Ø©
        function editTask(id) {
            const taskRef = database.ref('tasks/' + id);
            
            taskRef.once('value').then((snapshot) => {
                const task = snapshot.val();
                if (!task) return;
                
                const newName = prompt('Ø¹Ø¯Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ù‡Ù…Ø©:', task.name);
                const newDeadline = prompt('Ø¹Ø¯Ù„ Ø§Ù„Ù…ÙˆØ¹Ø¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:', task.deadline);
                const newStatus = prompt('Ø¹Ø¯Ù„ Ø§Ù„Ø­Ø§Ù„Ø©:', task.status);
                
                if (newName && newDeadline && newStatus) {
                    taskRef.update({
                        name: newName,
                        deadline: newDeadline,
                        status: newStatus
                    }).then(() => {
                        showNotification('ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù‡Ù…Ø©');
                    }).catch((error) => {
                        console.error("Error updating task:", error);
                        showNotification('ÙØ´Ù„ ÙÙŠ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù‡Ù…Ø©: ' + error.message, false);
                    });
                }
            });
        }
        
        // Ø­Ø°Ù Ù…Ù‡Ù…Ø©
        function deleteTask(id) {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø§Ù„Ù…Ù‡Ù…Ø©ØŸ')) {
                const taskRef = database.ref('tasks/' + id);
                
                taskRef.remove().then(() => {
                    showNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù‡Ù…Ø©');
                }).catch((error) => {
                    console.error("Error deleting task:", error);
                    showNotification('ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù‡Ù…Ø©: ' + error.message, false);
                });
            }
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ù‡Ù…Ø§Øª
        function updateTasksTable() {
            const tbody = document.querySelector('#tasksTable tbody');
            tbody.innerHTML = '';
            
            if (tasks.length === 0) {
                const tr = document.createElement('tr');
                tr.innerHTML = `<td colspan="7" style="text-align:center;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‡Ù…Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†</td>`;
                tbody.appendChild(tr);
                return;
            }
            
            tasks.forEach((task, index) => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td class="member-number">${index + 1}</td>
                    <td>${task.name}</td>
                    <td>${task.assigneeName}</td>
                    <td>${new Date(task.deadline).toLocaleDateString('ar-EG')}</td>
                    <td>${task.status}</td>
                    <td><button class='btn btn-primary editTask' data-id='${task.id}'>ØªØ¹Ø¯ÙŠÙ„</button></td>
                    <td><button class='btn btn-danger deleteTask' data-id='${task.id}'>Ø­Ø°Ù</button></td>
                `;
                tbody.appendChild(tr);
            });
        }
        
        // Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†
        function saveSecuritySettings() {
            const securityLevel = document.getElementById('securityLevel').value;
            
            const settingsRef = database.ref('systemSettings');
            settingsRef.update({
                securityLevel: securityLevel
            }).then(() => {
                showNotification('ØªÙ… Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù† Ø¨Ù†Ø¬Ø§Ø­');
            }).catch((error) => {
                console.error("Error saving security settings:", error);
                showNotification('ÙØ´Ù„ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª: ' + error.message, false);
            });
        }
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ù…Ù† Ø§Ù„Ø£Ø¯Ù…Ù†
        function resetPasswordFromAdmin() {
            const memberId = document.getElementById('resetMemberPassword').value;
            const newPassword = document.getElementById('newPasswordValue').value;
            
            if (!memberId || !newPassword) {
                showNotification('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ø¶Ùˆ ÙˆØ¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©', false);
                return;
            }
            
            const member = members.find(m => m.id === memberId);
            if (!member) {
                showNotification('Ø§Ù„Ø¹Ø¶Ùˆ Ø§Ù„Ù…Ø­Ø¯Ø¯ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯', false);
                return;
            }
            
            const memberRef = database.ref('members/' + memberId);
            memberRef.update({
                password: newPassword
            }).then(() => {
                showNotification(`ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ù„Ù€ ${member.name}`);
                document.getElementById('newPasswordValue').value = '';
            }).catch((error) => {
                console.error("Error resetting password:", error);
                showNotification('ÙØ´Ù„ ÙÙŠ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±: ' + error.message, false);
            });
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙˆÙ„ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†
        function updateSecurityLogsTable() {
            const tbody = document.querySelector('#securityLogsTable tbody');
            tbody.innerHTML = '';
            
            if (securityLogs.length === 0) {
                const tr = document.createElement('tr');
                tr.innerHTML = `<td colspan="5" style="text-align:center;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³Ø¬Ù„Ø§Øª Ø£Ù…Ø§Ù† Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†</td>`;
                tbody.appendChild(tr);
                return;
            }
            
            // Ø¹Ø±Ø¶ Ø¢Ø®Ø± 50 Ø³Ø¬Ù„ ÙÙ‚Ø·
            const recentLogs = securityLogs.slice(-50).reverse();
            
            recentLogs.forEach((log, index) => {
                const member = members.find(m => m.id === log.memberId);
                const tr = document.createElement('tr');
                
                let statusColor = '';
                if (log.status === 'success') statusColor = '#2ecc71';
                else if (log.status === 'failed') statusColor = '#e74c3c';
                else statusColor = '#f39c12';
                
                tr.innerHTML = `
                    <td class="member-number">${index + 1}</td>
                    <td>${member ? member.name : 'Ø¹Ø¶Ùˆ Ù…Ø­Ø°ÙˆÙ'}</td>
                    <td>${new Date(log.timestamp).toLocaleString('ar-EG')}</td>
                    <td>${log.type === 'biometric' ? 'Ø¨ØµÙ…Ø©/ÙˆØ¬Ù‡' : 'ÙƒÙ„Ù…Ø© Ø³Ø±'}</td>
                    <td style="color: ${statusColor}; font-weight: bold;">${log.status === 'success' ? 'Ù†Ø¬Ø§Ø­' : log.status === 'failed' ? 'ÙØ´Ù„' : 'Ø®Ø·Ø£'}</td>
                `;
                tbody.appendChild(tr);
            });
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±
        function updateReports() {
            document.getElementById('reportAttendance').textContent = attendanceRecords.length;
            document.getElementById('reportPoints').textContent = members.reduce((sum, member) => sum + (member.points || 0), 0);
            document.getElementById('reportMembers').textContent = members.length;
            document.getElementById('reportWeeks').textContent = weeks.length;
            
            updateTopMembers();
            updateCharts();
        }
        
        // ØªØ­Ø¯ÙŠØ« ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        function updateUserReports() {
            if (!currentUser) return;
            
            // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø£ÙŠØ§Ù… Ø§Ù„Ø­Ø¶ÙˆØ±
            const userAttendance = attendanceRecords.filter(ar => ar.memberId === currentUser.id).length;
            document.getElementById('userTotalAttendance').textContent = userAttendance;
            
            // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‚Ø§Ø·
            document.getElementById('userTotalPoints').textContent = currentUser.points || 0;
            
           // ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø­Ø³Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø· - Ø§Ù„ØªØµØ­ÙŠØ­ Ù‡Ù†Ø§
const sortedByPoints = [...members].sort((a, b) => (b.points || 0) - (a.points || 0));
const userRank = sortedByPoints.findIndex(m => m.id === currentUser.id) + 1;
document.getElementById('userRank').textContent = userRank;
            
            // Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø­Ø¶ÙˆØ±
            const totalWeeks = weeks.length;
            const attendanceRate = totalWeeks > 0 ? Math.round((userAttendance / totalWeeks) * 100) : 0;
            document.getElementById('userPerformance').textContent = `${attendanceRate}%`;
            
            // Ø¥Ø¶Ø§ÙØ© Ù…ÙŠØ¯Ø§Ù„ÙŠØ© Ø­Ø³Ø¨ Ø§Ù„ØªØ±ØªÙŠØ¨
            const rankingMedal = document.getElementById('userRankingMedal');
            rankingMedal.innerHTML = '';
            
            if (userRank === 1) {
                rankingMedal.innerHTML = '<span class="ranking-medal">ğŸ¥‡</span>';
            } else if (userRank === 2) {
                rankingMedal.innerHTML = '<span class="ranking-medal">ğŸ¥ˆ</span>';
            } else if (userRank === 3) {
                rankingMedal.innerHTML = '<span class="ranking-medal">ğŸ¥‰</span>';
            }
            
            // ØªØ­Ø¯ÙŠØ« Ù…Ø®Ø·Ø· Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            updateUserPointsChart();
        }
        
        // ØªØ­Ø¯ÙŠØ« Ù…Ø®Ø·Ø· Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        function updateUserPointsChart() {
            const ctx = document.getElementById('userPointsChart').getContext('2d');
            
            // ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ù…Ø®Ø·Ø·
            const userPointsByWeek = [];
            
            weeks.forEach(week => {
                const attendance = attendanceRecords.find(ar => 
                    ar.memberId === currentUser.id && ar.weekId === week.id
                );
                userPointsByWeek.push(attendance ? 1 : 0);
            });
            
            // ØªØ±Ø§ÙƒÙ… Ø§Ù„Ù†Ù‚Ø§Ø·
            let cumulativePoints = 0;
            const cumulativePointsData = userPointsByWeek.map(points => {
                cumulativePoints += points;
                return cumulativePoints;
            });
            
            // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ù…Ø®Ø·Ø· Ù…ÙˆØ¬ÙˆØ¯ØŒ Ù‚Ù… Ø¨ØªØ¯Ù…ÙŠØ±Ù‡ Ø£ÙˆÙ„Ø§Ù‹
            if (window.userPointsChartInstance) {
                window.userPointsChartInstance.destroy();
            }
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø®Ø·Ø· Ø¬Ø¯ÙŠØ¯
            window.userPointsChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: weeks.map(w => w.name),
                    datasets: [{
                        label: 'ØªØ±Ø§ÙƒÙ… Ø§Ù„Ù†Ù‚Ø§Ø·',
                        data: cumulativePointsData,
                        backgroundColor: 'rgba(54, 162, 235, 0.2)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        borderWidth: 2,
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Ø§Ù„Ù†Ù‚Ø§Ø·'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Ø§Ù„Ø£Ø³Ø§Ø¨ÙŠØ¹'
                            }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'ØªØ·ÙˆØ± Ø§Ù„Ù†Ù‚Ø§Ø· Ø®Ù„Ø§Ù„ Ø§Ù„Ø£Ø³Ø§Ø¨ÙŠØ¹'
                        }
                    }
                }
            });
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø®Ø·Ø·Ø§Øª Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ©
        function updateCharts() {
            updatePointsChart();
            updateAttendanceChart();
        }
        
       // ØªØ­Ø¯ÙŠØ« Ù…Ø®Ø·Ø· Ø§Ù„Ù†Ù‚Ø§Ø·
function updatePointsChart() {
    const ctx = document.getElementById('pointsChart').getContext('2d');

    // ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ù…Ø®Ø·Ø·
    const memberNames = members.map(m => m.name);
    const memberPoints = members.map(m => m.points || 0);

    // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ù…Ø®Ø·Ø· Ù…ÙˆØ¬ÙˆØ¯ØŒ Ù‚Ù… Ø¨ØªØ¯Ù…ÙŠØ±Ù‡ Ø£ÙˆÙ„Ø§Ù‹
    if (window.pointsChartInstance) {
        window.pointsChartInstance.destroy();
    }

    // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø®Ø·Ø· Ø¬Ø¯ÙŠØ¯
    window.pointsChartInstance = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: memberNames,
            datasets: [{
                label: 'Ø§Ù„Ù†Ù‚Ø§Ø·',
                data: memberPoints,
                backgroundColor: 'rgba(54, 162, 235, 0.5)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: {
                    beginAtZero: true,
                    title: {
                        display: true,
                        text: 'Ø§Ù„Ù†Ù‚Ø§Ø·'
                    }
                },
                x: {
                    title: {
                        display: true,
                        text: 'Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡'
                    }
                }
            },
            plugins: {
                title: {
                    display: true,
                    text: 'ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù†Ù‚Ø§Ø· Ø¨ÙŠÙ† Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡'
                },
                legend: {
                    display: false
                }
            }
        }
    });
}

// ØªØ­Ø¯ÙŠØ« Ù…Ø®Ø·Ø· Ø§Ù„Ø­Ø¶ÙˆØ±
function updateAttendanceChart() {
    const ctx = document.getElementById('attendanceChart').getContext('2d');

    // ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ù…Ø®Ø·Ø·
    const weekNames = weeks.map(w => w.name);
    const attendanceByWeek = weeks.map(week => {
        return attendanceRecords.filter(ar => ar.weekId === week.id).length;
    });

    // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ù…Ø®Ø·Ø· Ù…ÙˆØ¬ÙˆØ¯ØŒ Ù‚Ù… Ø¨ØªØ¯Ù…ÙŠØ±Ù‡ Ø£ÙˆÙ„Ø§Ù‹
    if (window.attendanceChartInstance) {
        window.attendanceChartInstance.destroy();
    }

    // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø®Ø·Ø· Ø¬Ø¯ÙŠØ¯
    window.attendanceChartInstance = new Chart(ctx, {
        type: 'line',
        data: {
            labels: weekNames,
            datasets: [{
                label: 'Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø¶ÙˆØ±',
                data: attendanceByWeek,
                backgroundColor: 'rgba(75, 192, 192, 0.2)',
                borderColor: 'rgba(75, 192, 192, 1)',
                borderWidth: 2,
                tension: 0.3,
                fill: true
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: {
                    beginAtZero: true,
                    title: {
                        display: true,
                        text: 'Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø¶ÙˆØ±'
                    }
                },
                x: {
                    title: {
                        display: true,
                        text: 'Ø§Ù„Ø£Ø³Ø§Ø¨ÙŠØ¹'
                    }
                }
            },
            plugins: {
                title: {
                    display: true,
                    text: 'Ø§Ù„Ø­Ø¶ÙˆØ± Ø®Ù„Ø§Ù„ Ø§Ù„Ø£Ø³Ø§Ø¨ÙŠØ¹'
                }
            }
        }
    });
}
        // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù€ 10 Ø§Ù„Ø£ÙˆØ§Ø¦Ù„
        function updateTopMembers() {
            const memberPoints = members.map(member => {
                return { name: member.name, points: member.points || 0 };
            });
            
            memberPoints.sort((a, b) => b.points - a.points);
            
            const top10 = memberPoints.slice(0, 10);
            
            const topMembersList = document.getElementById('topMembersList');
            topMembersList.innerHTML = '';
            
            if (top10.length === 0) {
                topMembersList.innerHTML = '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†</p>';
                return;
            }
            
            top10.forEach((member, index) => {
                const item = document.createElement('div');
                item.className = 'top-member-item';
                
                let medal = '';
                if (index === 0) medal = '<span class="medal medal-gold">ğŸ¥‡</span>';
                else if (index === 1) medal = '<span class="medal medal-silver">ğŸ¥ˆ</span>';
                else if (index === 2) medal = '<span class="medal medal-bronze">ğŸ¥‰</span>';
                
                item.innerHTML = `
                    <div class="top-member-name">${medal} ${member.name}</div>
                    <div class="top-member-points">${member.points} Ù†Ù‚Ø·Ø©</div>
                `;
                topMembersList.appendChild(item);
            });
        }
        
        // ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function exportData() {
            // Ø¥Ù†Ø´Ø§Ø¡ ÙƒØ§Ø¦Ù† ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            const data = {
                members: members,
                weeks: weeks,
                attendance: attendanceRecords,
                contests: contests,
                birthdays: birthdays,
                events: events,
                tasks: tasks,
                exportDate: new Date().toISOString()
            };
            
            // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ JSON
            const jsonData = JSON.stringify(data, null, 2);
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù Ù„Ù„ØªØ­Ù…ÙŠÙ„
            const blob = new Blob([jsonData], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø§Ø¨Ø· Ù„Ù„ØªØ­Ù…ÙŠÙ„
            const a = document.createElement('a');
            a.href = url;
            a.download = `angels_attendance_backup_${new Date().toISOString().slice(0, 10)}.json`;
            document.body.appendChild(a);
            a.click();
            
            // ØªÙ†Ø¸ÙŠÙ
            setTimeout(() => {
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, 100);
            
            showNotification('ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­');
        }
        
        // Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠ
        function backupData() {
            exportData(); // Ø­Ø§Ù„ÙŠØ§Ù‹ Ù†ÙØ³ ÙˆØ¸ÙŠÙØ© Ø§Ù„ØªØµØ¯ÙŠØ±
            showNotification('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­');
        }
        
        // ØªØµØ¯ÙŠØ± ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø­Ø¶ÙˆØ±
        function exportAttendanceReport() {
            let csvContent = "data:text/csv;charset=utf-8,\uFEFF";
            
            // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙ‚Ø±ÙŠØ±
            csvContent += "ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø­Ø¶ÙˆØ± - Ù†Ø¸Ø§Ù… Ø®Ø¯Ø§Ù… Ù…Ù„Ø§ÙŠÙƒØ©\r\n";
            csvContent += `ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØµØ¯ÙŠØ±: ${new Date().toLocaleDateString('ar-EG')}\r\n\r\n`;
            
            // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡
            csvContent += "Ø§Ù„Ø±Ù‚Ù…,Ø§Ø³Ù… Ø§Ù„Ø¹Ø¶Ùˆ,Ø§Ù„Ù†Ù‚Ø§Ø·,Ø¹Ø¯Ø¯ Ø£ÙŠØ§Ù… Ø§Ù„Ø­Ø¶ÙˆØ±\r\n";
            
            members.forEach((member, index) => {
                const attendanceCount = attendanceRecords.filter(ar => ar.memberId === member.id).length;
                csvContent += `${index + 1},${member.name},${member.points || 0},${attendanceCount}\r\n`;
            });
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø§Ø¨Ø· Ù„Ù„ØªØ­Ù…ÙŠÙ„
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", `ØªÙ‚Ø±ÙŠØ±_Ø§Ù„Ø­Ø¶ÙˆØ±_${new Date().toISOString().slice(0, 10)}.csv`);
            document.body.appendChild(link);
            
            link.click();
            document.body.removeChild(link);
            
            showNotification('ØªÙ… ØªØµØ¯ÙŠØ± ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø­Ø¶ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­');
        }
        
        // ØªØµØ¯ÙŠØ± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡
        function exportMembersReport() {
            let csvContent = "data:text/csv;charset=utf-8,\uFEFF";
            
            // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙ‚Ø±ÙŠØ±
            csvContent += "Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡ - Ù†Ø¸Ø§Ù… Ø®Ø¯Ø§Ù… Ù…Ù„Ø§ÙŠÙƒØ©\r\n";
            csvContent += `ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØµØ¯ÙŠØ±: ${new Date().toLocaleDateString('ar-EG')}\r\n\r\n`;
            
            // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡
            csvContent += "Ø§Ù„Ø±Ù‚Ù…,Ø§Ø³Ù… Ø§Ù„Ø¹Ø¶Ùˆ,Ø§Ù„Ù†Ù‚Ø§Ø·,ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±\r\n";
            
            members.forEach((member, index) => {
                csvContent += `${index + 1},${member.name},${member.points || 0},${member.password}\r\n`;
            });
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø§Ø¨Ø· Ù„Ù„ØªØ­Ù…ÙŠÙ„
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", `Ø¨ÙŠØ§Ù†Ø§Øª_Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡_${new Date().toISOString().slice(0, 10)}.csv`);
            document.body.appendChild(link);
            
            link.click();
            document.body.removeChild(link);
            
            showNotification('ØªÙ… ØªØµØ¯ÙŠØ± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡ Ø¨Ù†Ø¬Ø§Ø­');
        }
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
        function showNotification(message, isSuccess = true) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.background = isSuccess ? '#2ecc71' : '#e74c3c';
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }
        
        // Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>
