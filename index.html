<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>نظام حضور Angels Attendance</title>
<style>
    /* ======== Reset & Basic ======== */
    * { margin:0; padding:0; box-sizing:border-box; font-family: 'Arial', sans-serif; }
    body { background:#f5f6fa; color:#2c3e50; }
    h2,h3 { margin-bottom:15px; }

    /* ======== Container ======== */
    .container { max-width:1000px; margin:20px auto; background:#fff; padding:20px; border-radius:12px; box-shadow:0 8px 20px rgba(0,0,0,0.1); }

    /* ======== Header ======== */
    .header { display:flex; justify-content:space-between; align-items:center; margin-bottom:30px; }
    .header h2 { color:#3498db; }
    .btn { padding:8px 15px; border:none; border-radius:8px; cursor:pointer; transition:0.3s; }
    .btn:hover { opacity:0.9; }
    .btn-primary { background:#3498db; color:#fff; }
    .btn-danger { background:#e74c3c; color:#fff; }
    .btn-success { background:#2ecc71; color:#fff; }

    /* ======== Forms ======== */
    .form-group { margin-bottom:15px; display:flex; flex-direction:column; }
    label { margin-bottom:5px; font-weight:bold; }
    input, select { padding:10px; border:1px solid #ccc; border-radius:8px; }

    /* ======== Table ======== */
    table { width:100%; border-collapse:collapse; margin-top:20px; }
    th, td { padding:10px; text-align:center; border-bottom:1px solid #eee; }
    th { background:#3498db; color:#fff; border-radius:12px 12px 0 0; }
    img.member-img { width:40px; height:40px; border-radius:50%; }

    /* ======== Member Dashboard ======== */
    .dashboard { margin-top:20px; }
    .card { background:#ecf0f1; padding:15px; border-radius:12px; margin-bottom:20px; }
    .card h3 { margin-bottom:10px; }

    /* ======== Hidden ======== */
    .hidden { display:none; }

    /* ======== Footer ======== */
    .footer { text-align:center; margin-top:20px; color:#7f8c8d; }
</style>
</head>
<body>

<div class="container">
    <div id="loginSection">
        <h2>تسجيل الدخول</h2>
        <div class="form-group">
            <label>اختر نوع الحساب:</label>
            <select id="accountType">
                <option value="member">عضو</option>
                <option value="admin">مدير</option>
            </select>
        </div>
        <div class="form-group" id="passwordGroup" style="display:none;">
            <label>كلمة المرور للمدير:</label>
            <input type="password" id="adminPassword" placeholder="ادخل كلمة المرور">
        </div>
        <button class="btn btn-primary" onclick="login()">تسجيل الدخول</button>
    </div>

    <div id="memberSection" class="hidden">
        <h2>تسجيل الحضور - واجهة العضو</h2>
        <div class="form-group">
            <label>اختر اسمك:</label>
            <select id="memberSelect"></select>
        </div>
        <div class="form-group">
            <label>اختر الأسبوع:</label>
            <select id="weekSelect"></select>
        </div>
        <button class="btn btn-success" onclick="recordAttendance()">تسجيل الحضور</button>

        <div class="dashboard">
            <div class="card">
                <h3>نقاطي الحالية</h3>
                <p id="memberPoints">0 نقطة</p>
            </div>
            <div class="card">
                <h3>تقرير حضوري</h3>
                <p id="memberAttendanceReport">لا توجد بيانات بعد</p>
            </div>
        </div>
        <button class="btn btn-danger" onclick="logout()">تسجيل الخروج</button>
    </div>

    <div id="adminSection" class="hidden">
        <h2>لوحة تحكم المدير</h2>
        <p>مرحبًا، لديك صلاحيات كاملة لإدارة النظام.</p>
        <button class="btn btn-danger" onclick="logout()">تسجيل الخروج</button>
    </div>
</div>

<div class="footer">&copy; 2025 Angels Attendance</div>

<script>
// ======== البيانات التخيلية ========
let members = [
    {id:1,name:'أحمد'},
    {id:2,name:'سارة'},
    {id:3,name:'محمود'}
];
let weeks = [
    {id:1,name:'الأسبوع 1'},
    {id:2,name:'الأسبوع 2'}
];
let attendanceRecords = [];

// ======== Login ========
const accountTypeSelect = document.getElementById('accountType');
accountTypeSelect.addEventListener('change', ()=>{
    document.getElementById('passwordGroup').style.display = accountTypeSelect.value==='admin'?'block':'none';
});

function login(){
    const type = accountTypeSelect.value;
    if(type==='admin'){
        const pw = document.getElementById('adminPassword').value;
        if(pw!=='admin123'){ alert('كلمة المرور خاطئة'); return; }
        document.getElementById('loginSection').classList.add('hidden');
        document.getElementById('adminSection').classList.remove('hidden');
    }else{
        document.getElementById('loginSection').classList.add('hidden');
        document.getElementById('memberSection').classList.remove('hidden');
        populateMemberOptions();
        populateWeekOptions();
        updateMemberDashboard();
    }
}

function logout(){
    document.getElementById('loginSection').classList.remove('hidden');
    document.getElementById('adminSection').classList.add('hidden');
    document.getElementById('memberSection').classList.add('hidden');
    document.getElementById('adminPassword').value='';
}

// ======== Populate Selects ========
function populateMemberOptions(){
    const select = document.getElementById('memberSelect');
    select.innerHTML='';
    members.forEach(m=>{select.innerHTML+=`<option value='${m.id}'>${m.name}</option>`;});
}
function populateWeekOptions(){
    const select = document.getElementById('weekSelect');
    select.innerHTML='';
    weeks.forEach(w=>{select.innerHTML+=`<option value='${w.id}'>${w.name}</option>`;});
}

// ======== Record Attendance ========
function recordAttendance(){
    const memberId = parseInt(document.getElementById('memberSelect').value);
    const weekId = parseInt(document.getElementById('weekSelect').value);
    if(attendanceRecords.find(r=>r.memberId===memberId && r.weekId===weekId)){
        alert('تم تسجيل حضورك مسبقاً لهذا الأسبوع');
        return;
    }
    attendanceRecords.push({memberId,weekId});
    alert('تم تسجيل الحضور بنجاح');
    updateMemberDashboard();
}

function updateMemberDashboard(){
    const memberId = parseInt(document.getElementById('memberSelect').value);
    const points = attendanceRecords.filter(r=>r.memberId===memberId).length*10;
    document.getElementById('memberPoints').innerText = points+' نقطة';

    let report='';
    weeks.forEach(w=>{
        const attended = attendanceRecords.find(r=>r.memberId===memberId && r.weekId===w.id);
        report+=`${w.name}: ${attended?'حضر':'غائب'}\n`;
    });
    document.getElementById('memberAttendanceReport').innerText=report;
}

</script>
</body>
</html>
