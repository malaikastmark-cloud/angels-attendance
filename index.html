<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Angels Attendance</title>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600&display=swap');
    * {box-sizing: border-box; font-family: 'Cairo', sans-serif;}
    body {margin:0; background: linear-gradient(135deg, #f5f7fa, #c3cfe2); color:#333;}
    header {background: #3498db; color:#fff; padding:20px; text-align:center; font-size:1.5em;}
    .container {max-width:1200px; margin:20px auto; padding:10px;}
    .card-grid {display:grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap:20px;}
    .card {background:#fff; padding:20px; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,0.1); transition: transform 0.2s;}
    .card:hover {transform: translateY(-5px);}
    button {padding:10px 20px; border:none; border-radius:6px; background:#3498db; color:#fff; cursor:pointer; transition: background 0.2s;}
    button:hover {background:#2980b9;}
    input, select {width:100%; padding:10px; margin:5px 0 15px 0; border:1px solid #ccc; border-radius:6px;}
    .hidden {display:none;}
    .admin-login {max-width:400px; margin:50px auto; padding:30px; background:#fff; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,0.1);}
    h2 {margin-top:0;}
    .report, .points {margin-top:15px;}
    .back-btn {background:#e74c3c; margin-top:10px;}
</style>
</head>
<body>

<header>Angels Attendance</header>

<div id="member-view" class="container">
    <h2>تسجيل الحضور</h2>
    <div class="card">
        <label for="memberName">اختر اسمك:</label>
        <select id="memberName">
            <option value="">اختر اسم العضو</option>
        </select>

        <label for="weekSelect">اختر الأسبوع:</label>
        <select id="weekSelect">
            <option value="">اختر الأسبوع</option>
        </select>

        <button id="markAttendanceBtn">تسجيل الحضور</button>
    </div>

    <div class="card points">
        <h3>عرض النقاط</h3>
        <p>النقاط الحالية: <span id="memberPoints">0</span></p>
    </div>

    <div class="card report">
        <h3>التقارير</h3>
        <p>عدد الحضور: <span id="memberAttendance">0</span></p>
    </div>

    <button id="adminLoginBtn">دخول الأدمن</button>
</div>

<div id="admin-view" class="container hidden">
    <h2>لوحة الأدمن</h2>
    <div class="card">
        <label for="adminPassword">كلمة المرور:</label>
        <input type="password" id="adminPassword" placeholder="أدخل كلمة المرور">
        <button id="adminSubmitBtn">تسجيل الدخول</button>
    </div>
    <button class="back-btn" id="backToMemberBtn">رجوع</button>
</div>

<script>
    // بيانات تجريبية
    const members = [
        {id:1, name:'أحمد'},
        {id:2, name:'سارة'},
        {id:3, name:'محمد'}
    ];
    const weeks = [
        {id:1, name:'الأسبوع 1'},
        {id:2, name:'الأسبوع 2'},
        {id:3, name:'الأسبوع 3'}
    ];

    const attendanceRecords = {}; // {memberId_weekId: true}

    // تعبئة قائمة الأعضاء
    const memberNameEl = document.getElementById('memberName');
    members.forEach(m => {
        const opt = document.createElement('option');
        opt.value = m.id;
        opt.textContent = m.name;
        memberNameEl.appendChild(opt);
    });

    // تعبئة قائمة الأسابيع
    const weekSelectEl = document.getElementById('weekSelect');
    weeks.forEach(w => {
        const opt = document.createElement('option');
        opt.value = w.id;
        opt.textContent = w.name;
        weekSelectEl.appendChild(opt);
    });

    const memberPointsEl = document.getElementById('memberPoints');
    const memberAttendanceEl = document.getElementById('memberAttendance');

    document.getElementById('markAttendanceBtn').addEventListener('click', () => {
        const memberId = memberNameEl.value;
        const weekId = weekSelectEl.value;
        if(!memberId || !weekId){ alert('يرجى اختيار العضو والأسبوع'); return;}
        attendanceRecords[`${memberId}_${weekId}`] = true;
        alert('تم تسجيل الحضور بنجاح');
        updateMemberStats(memberId);
    });

    function updateMemberStats(memberId){
        const attendedWeeks = Object.keys(attendanceRecords).filter(k=>k.startsWith(memberId+'_')).length;
        memberAttendanceEl.textContent = attendedWeeks;
        memberPointsEl.textContent = attendedWeeks * 10;
    }

    // إدارة عرض الأدمن
    const memberView = document.getElementById('member-view');
    const adminView = document.getElementById('admin-view');

    document.getElementById('adminLoginBtn').addEventListener('click', ()=>{
        memberView.classList.add('hidden');
        adminView.classList.remove('hidden');
    });

    document.getElementById('backToMemberBtn').addEventListener('click', ()=>{
        adminView.classList.add('hidden');
        memberView.classList.remove('hidden');
    });

    document.getElementById('adminSubmitBtn').addEventListener('click', ()=>{
        const pwd = document.getElementById('adminPassword').value;
        if(pwd==='admin123'){
            alert('تم تسجيل دخول الأدمن');
            // هنا يمكنك فتح لوحة الأدمن الكاملة لاحقًا
        } else {
            alert('كلمة المرور خاطئة');
        }
    });
</script>

</body>
</html>
