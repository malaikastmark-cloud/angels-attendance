<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>نظام الحضور وإدارة الأعضاء</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js"></script>
<style>
body { font-family: Arial, sans-serif; }
.member-img { width: 40px; height: 40px; border-radius: 50%; }
.top-member-item { display: flex; justify-content: space-between; margin-bottom: 10px; }
.member-stats { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
.member-stat-item { text-align: center; background: #f1f1f1; padding: 5px 10px; border-radius: 5px; }
#notification { position: fixed; top: 10px; right: 10px; padding: 10px; color: #fff; display: none; border-radius: 5px; }
.login-failed { animation: shake 0.5s; }
@keyframes shake { 0%{transform:translateX(0);}25%{transform:translateX(-5px);}50%{transform:translateX(5px);}75%{transform:translateX(-5px);}100%{transform:translateX(0);} }
</style>
</head>
<body>
<div class="container mt-3">
<h2 class="mb-3">نظام الحضور وإدارة الأعضاء</h2>
<div id="notification"></div>

<!-- واجهة المستخدم -->
<div id="userAttendance">
<div class="row mb-3">
<div class="col-md-5">
<select id="selectMember" class="form-select mb-2"><option value="">-- اختر اسمك --</option></select>
<select id="weekSelect" class="form-select"><option value="">-- اختر الأسبوع --</option></select>
</div>
<div class="col-md-2">
<button class="btn btn-success" id="markPresent">تسجيل الحضور</button>
</div>
<div class="col-md-2">
<button class="btn btn-primary" id="adminLoginBtn">تسجيل دخول كأدمن</button>
</div>
</div>
<div class="mb-3">
<canvas id="attendanceChart" height="100"></canvas>
</div>
<div id="topMembersList"></div>
</div>

<!-- نافذة تسجيل دخول الأدمن -->
<div id="adminLoginModal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);justify-content:center;align-items:center;">
<div style="background:#fff;padding:20px;border-radius:5px;min-width:300px;">
<h5>تسجيل دخول الأدمن</h5>
<input type="password" id="adminPassword" class="form-control mb-2" placeholder="كلمة السر">
<button class="btn btn-success" id="confirmAdminLogin">دخول</button>
<button class="btn btn-secondary" id="cancelAdminLogin">إلغاء</button>
</div>
</div>

<!-- لوحة الأدمن -->
<div id="adminTabs" style="display:none;">
<ul class="nav nav-tabs mb-3">
<li class="nav-item"><a class="nav-link active" data-bs-toggle="tab" href="#membersTab">الأعضاء</a></li>
<li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#weeksTab">الأسابيع</a></li>
<li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#attendanceTab">الحضور</a></li>
<li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tasksTab">المهمات</a></li>
<li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#eventsTab">المناسبات</a></li>
<li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#reportTab">التقارير</a></li>
</ul>
<div class="tab-content">
<!-- الأعضاء -->
<div class="tab-pane fade show active" id="membersTab">
<div class="mb-2"><input type="text" id="newMemberName" class="form-control mb-1" placeholder="اسم العضو"><input type="text" id="newMemberEmoji" class="form-control mb-1" placeholder="إيموجي"><input type="text" id="newMemberImage" class="form-control mb-1" placeholder="رابط الصورة"><button class="btn btn-success" id="addMemberBtn">إضافة عضو</button></div>
<table class="table table-bordered" id="membersTable"><thead><tr><th>#</th><th>صورة</th><th>الاسم</th><th>نقاط</th><th>مكافآت</th><th>تعديل</th><th>حذف</th></tr></thead><tbody></tbody></table>
</div>
<!-- الأسابيع -->
<div class="tab-pane fade" id="weeksTab">
<div class="mb-2"><input type="text" id="newWeekName" class="form-control mb-1" placeholder="اسم الأسبوع"><input type="date" id="newWeekStart" class="form-control mb-1"><input type="date" id="newWeekEnd" class="form-control mb-1"><button class="btn btn-success" id="addWeekBtn">إضافة أسبوع</button></div>
<table class="table table-bordered" id="weeksTable"><thead><tr><th>#</th><th>الاسم</th><th>من</th><th>إلى</th><th>تعديل</th><th>حذف</th></tr></thead><tbody></tbody></table>
</div>
<!-- الحضور -->
<div class="tab-pane fade" id="attendanceTab">
<select id="extraPointMember" class="form-select mb-1"><option value="">-- اختر العضو --</option></select>
<input type="number" id="extraPointsValue" class="form-control mb-1" value="1">
<input type="text" id="extraPointsReason" class="form-control mb-1" placeholder="سبب النقاط الإضافية">
<button class="btn btn-success mb-2" id="addExtraPointsBtn">إضافة نقاط إضافية</button>
<select id="deleteWeekSelect" class="form-select mb-1"><option value="">-- اختر الأسبوع --</option></select>
<button class="btn btn-danger mb-2" id="deleteAttendanceBtn">حذف كل الحضور للأسبوع</button>
<table class="table table-bordered" id="attendanceRecordsBody"><thead><tr><th>#</th><th>العضو</th><th>الأسبوع</th><th>التاريخ</th><th>حذف</th></tr></thead><tbody></tbody></table>
<div id="membersStatsContainer"></div>
</div>
<!-- المهمات -->
<div class="tab-pane fade" id="tasksTab">
<select id="newTaskAssignee" class="form-select mb-1"><option value="">-- اختر المسؤول --</option></select>
<input type="text" id="newTaskName" class="form-control mb-1" placeholder="اسم المهمة">
<input type="date" id="newTaskDeadline" class="form-control mb-1">
<button class="btn btn-success mb-2" id="addTaskBtn">إضافة مهمة</button>
<table class="table table-bordered" id="tasksTable"><thead><tr><th>#</th><th>المهمة</th><th>المسؤول</th><th>الموعد النهائي</th><th>الحالة</th><th>تعديل</th><th>حذف</th></tr></thead><tbody></tbody></table>
</div>
<!-- المناسبات -->
<div class="tab-pane fade" id="eventsTab">
<input type="text" id="newEventName" class="form-control mb-1" placeholder="اسم المناسبة">
<input type="date" id="newEventDate" class="form-control mb-1">
<input type="text" id="newEventDescription" class="form-control mb-1" placeholder="وصف المناسبة">
<button class="btn btn-success mb-2" id="addEventBtn">إضافة مناسبة</button>
<table class="table table-bordered" id="eventsTable"><thead><tr><th>#</th><th>الاسم</th><th>التاريخ</th><th>الوصف</th><th>تعديل</th><th>حذف</th></tr></thead><tbody></tbody></table>
</div>
<!-- التقارير -->
<div class="tab-pane fade" id="reportTab">
<button class="btn btn-primary mb-2" id="printReportBtn">طباعة التقرير</button>
<button class="btn btn-success mb-2" id="exportExcelBtn">تصدير Excel</button>
<table class="table table-bordered" id="reportTable"><thead><tr><th>الاسم</th><th>النقاط</th><th>المكافآت</th></tr></thead><tbody></tbody></table>
</div>
</div>
<button class="btn btn-secondary mt-3" id="backToUserView">العودة لواجهة المستخدم</button>
</div>

<script src="app.js"></script>
</body>
</html>
