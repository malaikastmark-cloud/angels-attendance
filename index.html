<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุธุงู ุญุถูุฑ ุฎุฏุงู ููุงููุฉ - Talanton</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* ุฃููุงุท CSS ุงูุณุงุจูุฉ */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            padding: 20px;
            position: relative;
            overflow: hidden;
        }
        
        header {
            background: #3498db;
            color: white;
            padding: 20px;
            text-align: center;
            border-radius: 10px;
            position: relative;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        /* ... ุจุงูู ุงูุฃููุงุท ... */
        
        .admin-login-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>๐ ูุธุงู ุญุถูุฑ ุฎุฏุงู ููุงููุฉ - Talanton</h1>
            <p>ุงูุญุถูุฑ ูุณุงูู talanton</p>
        </header>

        <div class="notification" id="notification"></div>

        <div class="tabs">
            <div class="tab active" data-tab="userAttendance">ุชุณุฌูู ุงูุญุถูุฑ</div>
            <div class="tab" data-tab="userReports">ุชูุงุฑูุฑู</div>
            <div class="tab" data-tab="talantonStore">ูุชุฌุฑ Talanton</div>
        </div>

        <!-- ูุญุชูู ุงูุชุจููุจุงุช ุงูุฃุณุงุณูุฉ -->
        <div class="tab-content active" id="userAttendance">
            <!-- ูุญุชูู ุชุณุฌูู ุงูุญุถูุฑ -->
        </div>

        <div class="tab-content" id="userReports">
            <!-- ูุญุชูู ุงูุชูุงุฑูุฑ -->
        </div>

        <div class="tab-content" id="talantonStore">
            <!-- ูุญุชูู ุงููุชุฌุฑ -->
        </div>

        <!-- ุฒุฑ ุชุณุฌูู ุฏุฎูู ุงูุฃุฏูู -->
        <div class="admin-login-container">
            <button class="btn btn-success" id="adminLoginBtn">ุชุณุฌูู ุฏุฎูู ุงูุฃุฏูู</button>
        </div>

        <!-- ูุงูุฐุฉ ุชุณุฌูู ุฏุฎูู ุงูุฃุฏูู -->
        <div class="modal" id="adminLoginModal">
            <div class="modal-content">
                <h2>ุชุณุฌูู ุฏุฎูู ุงูุฃุฏูู</h2>
                <div class="password-field">
                    <input type="password" id="adminPassword" placeholder="ูููุฉ ุงูุณุฑ">
                    <span class="toggle-password" id="toggleAdminPassword">
                        <i class="fas fa-eye"></i>
                    </span>
                </div>
                <div class="controls">
                    <button class="btn btn-danger" id="cancelAdminLogin">ุฅูุบุงุก</button>
                    <button class="btn btn-success" id="confirmAdminLogin">ุฏุฎูู</button>
                </div>
            </div>
        </div>

        <!-- ูุงุฌูุฉ ุงูุฃุฏูู (ุณูุชู ุชุญููููุง ุฏููุงูููููุง) -->
        <div class="tab-content" id="adminTabs" style="display:none;"></div>
    </div>

    <script>
        // ุชููุฆุฉ Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyBCQIqdCsxSvhfYOs00AetoVWpFhj4XNAQ",
            authDomain: "angels-attendance.firebaseapp.com",
            databaseURL: "https://angels-attendance-default-rtdb.firebaseio.com",
            projectId: "angels-attendance",
            storageBucket: "angels-attendance.firebasestorage.app",
            messagingSenderId: "157249026489",
            appId: "1:157249026489:web:db2b420203bd81d9a19e68",
            measurementId: "G-2YDPSFPQYT"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // ุจูุงูุงุช ุงูุชุทุจูู
        let members = [];
        let weeks = [];
        let attendanceRecords = [];
        let contests = [];
        let birthdays = [];
        let events = [];
        let tasks = [];
        let currentUser = null;
        let adminPassword = 'admin123';

        // ูุธุงุฆู ุงูุชููุฆุฉ
        function initializeApp() {
            setupEventListeners();
            loadMembersFromFirebase();
            loadWeeksFromFirebase();
        }

        // ุฅุนุฏุงุฏ ูุณุชูุนู ุงูุฃุญุฏุงุซ ุงูุฃุณุงุณูุฉ
        function setupEventListeners() {
            // ุชุณุฌูู ุฏุฎูู ุงูุฃุฏูู
            document.getElementById('adminLoginBtn').addEventListener('click', showAdminLogin);
            document.getElementById('cancelAdminLogin').addEventListener('click', hideAdminLogin);
            document.getElementById('confirmAdminLogin').addEventListener('click', confirmAdminLogin);
            
            // ุชุจููุจุงุช ูุงุฌูุฉ ุงููุณุชุฎุฏู
            document.querySelectorAll('.tabs .tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    switchTab(tabId);
                });
            });
        }

        // ุชุญููู ูุงุฌูุฉ ุงูุฃุฏูู
        function loadAdminInterface() {
            const adminTabs = document.getElementById('adminTabs');
            
            // ุชุญููู ูุญุชูู ูุงุฌูุฉ ุงูุฃุฏูู
            adminTabs.innerHTML = `
                <div class="controls">
                    <button class="btn btn-secondary" id="backToUserView">
                        <i class="fas fa-arrow-right"></i> ุงูุนูุฏุฉ ุฅูู ูุงุฌูุฉ ุงููุณุชุฎุฏู
                    </button>
                    <button class="btn btn-info" id="exportDataBtn">
                        <i class="fas fa-download"></i> ุชุตุฏูุฑ ุงูุจูุงูุงุช
                    </button>
                    <button class="btn btn-warning" id="backupDataBtn">
                        <i class="fas fa-save"></i> ูุณุฎ ุงุญุชูุงุทู
                    </button>
                </div>

                <div class="tabs">
                    <div class="tab active" data-tab="members">ุฅุฏุงุฑุฉ ุงูุฃุนุถุงุก</div>
                    <div class="tab" data-tab="weeks">ุฅุฏุงุฑุฉ ุงูุฃุณุงุจูุน</div>
                    <div class="tab" data-tab="attendance">ุฅุฏุงุฑุฉ ุงูุญุถูุฑ</div>
                    <div class="tab" data-tab="security">ุงูุฃูุงู ูุงูุชุญูู</div>
                    <div class="tab" data-tab="contests">ุงููุณุงุจูุงุช <i class="fas fa-trophy emoji-icon"></i></div>
                    <div class="tab" data-tab="birthdays">ุฃุนูุงุฏ ุงููููุงุฏ <i class="fas fa-birthday-cake emoji-icon"></i></div>
                    <div class="tab" data-tab="events">ุงูููุงุณุจุงุช <i class="fas fa-calendar-alt emoji-icon"></i></div>
                    <div class="tab" data-tab="tasks">ุงููููุงุช <i class="fas fa-tasks emoji-icon"></i></div>
                    <div class="tab" data-tab="talantonAdmin">ุฅุฏุงุฑุฉ Talanton</div>
                    <div class="tab" data-tab="reports">ุงูุชูุงุฑูุฑ</div>
                </div>

                <!-- ูุญุชูู ุฅุฏุงุฑุฉ ุงูุฃุนุถุงุก -->
                <div class="tab-content active" id="members">
                    <h2>ุฅุฏุงุฑุฉ ุงูุฃุนุถุงุก</h2>
                    <div class="controls">
                        <input type="text" id="newMemberName" placeholder="ุงุณู ุงูุนุถู">
                        <select id="newMemberEmoji">
                            <option value="๐ง">๐ง </option>
                            <option value="๐ฆ">๐ฆ </option>
                            <option value="๐ง">๐ง </option>
                        </select>
                        <input type="password" id="newMemberPassword" placeholder="ูููุฉ ุงูุณุฑ">
                        <button class="btn btn-primary" id="addMemberBtn">ุฅุถุงูุฉ ุนุถู</button>
                    </div>
                    <table id="membersTable">
                        <thead>
                            <tr>
                                <th class="member-number">#</th>
                                <th>ุงุณู ุงูุนุถู</th>
                                <th>Talanton</th>
                                <th>ุชุนุฏูู</th>
                                <th>ุญุฐู</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${renderMembersTable()}
                        </tbody>
                    </table>
                </div>

                <!-- ูุญุชูู ุฅุฏุงุฑุฉ ุงูุฃุณุงุจูุน -->
                <div class="tab-content" id="weeks">
                    <h2>ุฅุฏุงุฑุฉ ุงูุฃุณุงุจูุน</h2>
                    <div class="controls">
                        <input type="text" id="newWeekName" placeholder="ุงุณู ุงูุฃุณุจูุน">
                        <input type="date" id="newWeekDate">
                        <button class="btn btn-primary" id="addWeekBtn">ุฅุถุงูุฉ ุฃุณุจูุน</button>
                    </div>
                    <table id="weeksTable">
                        <thead>
                            <tr>
                                <th class="member-number">#</th>
                                <th>ุงุณู ุงูุฃุณุจูุน</th>
                                <th>ุงูุชุงุฑูุฎ</th>
                                <th>ุชุนุฏูู</th>
                                <th>ุญุฐู</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${renderWeeksTable()}
                        </tbody>
                    </table>
                </div>

                <!-- ูุญุชูู ุฅุฏุงุฑุฉ ุงูุญุถูุฑ -->
                <div class="tab-content" id="attendance">
                    <h2>ุฅุฏุงุฑุฉ ุงูุญุถูุฑ</h2>
                    <div class="controls">
                        <select id="attendanceWeekSelect">
                            ${renderWeeksOptions()}
                        </select>
                        <button class="btn btn-danger" id="deleteAttendanceBtn">ุญุฐู ุญุถูุฑ ุงูุฃุณุจูุน</button>
                    </div>
                    <div class="extra-point-form">
                        <h3>ุฅุถุงูุฉ Talanton ุฅุถุงููุฉ <i class="fas fa-star emoji-icon"></i></h3>
                        <select id="extraPointMember">
                            ${renderMembersOptions()}
                        </select>
                        <input type="number" id="extraPointsValue" placeholder="ุนุฏุฏ Talanton" min="1" value="1">
                        <input type="text" id="extraPointsReason" placeholder="ุณุจุจ ุงูุฅุถุงูุฉ">
                        <button class="btn btn-warning" id="addExtraPointsBtn">ุฅุถุงูุฉ Talanton</button>
                    </div>
                    <table id="attendanceTable">
                        <thead>
                            <tr>
                                <th class="member-number">#</th>
                                <th>ุงุณู ุงูุนุถู</th>
                                <th>ุงูุญุถูุฑ</th>
                                <th>ุงูุชุงุฑูุฎ</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${renderAttendanceTable()}
                        </tbody>
                    </table>
                </div>

                <!-- ูุญุชูู ุงูุฃูุงู ูุงูุชุญูู -->
                <div class="tab-content" id="security">
                    <h2>ุฅุนุฏุงุฏุงุช ุงูุฃูุงู ูุงูุชุญูู</h2>
                    
                    <div class="security-settings">
                        <h3>ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ</h3>
                        <div class="controls">
                            <label>ุชูุนูู ูุธุงู ุงูุชุญูู: </label>
                            <select id="securityLevel">
                                <option value="none">ูุง ููุฌุฏ ุชุญูู</option>
                                <option value="password">ูููุฉ ุณุฑ ููุท</option>
                                <option value="biometric">ุจุตูุฉ/ูุฌู (ุฅู ุฃููู)</option>
                            </select>
                            <button class="btn btn-primary" id="saveSecuritySettings">ุญูุธ ุงูุฅุนุฏุงุฏุงุช</button>
                        </div>
                    </div>
                    
                    <div class="admin-password-form">
                        <h3>ุชุบููุฑ ูููุฉ ุณุฑ ุงูุฃุฏูู</h3>
                        <div class="controls">
                            <div class="password-field">
                                <input type="password" id="currentAdminPassword" placeholder="ูููุฉ ุงูุณุฑ ุงูุญุงููุฉ">
                                <span class="toggle-password" id="toggleCurrentAdminPassword">
                                    <i class="fas fa-eye"></i>
                                </span>
                            </div>
                            <div class="password-field">
                                <input type="password" id="newAdminPassword" placeholder="ูููุฉ ุงูุณุฑ ุงูุฌุฏูุฏุฉ">
                                <span class="toggle-password" id="toggleNewAdminPassword">
                                    <i class="fas fa-eye"></i>
                                </span>
                            </div>
                            <div class="password-field">
                                <input type="password" id="confirmAdminPassword" placeholder="ุชุฃููุฏ ูููุฉ ุงูุณุฑ">
                                <span class="toggle-password" id="toggleConfirmAdminPassword">
                                    <i class="fas fa-eye"></i>
                                </span>
                            </div>
                            <button class="btn btn-warning" id="changeAdminPasswordBtn">ุชุบููุฑ ูููุฉ ุงูุณุฑ</button>
                        </div>
                    </div>
                    
                    <div class="report-section">
                        <h3>ุฅุนุงุฏุฉ ุชุนููู ูููุงุช ุงูุณุฑ</h3>
                        <div class="controls">
                            <select id="resetMemberPassword">
                                ${renderMembersOptions()}
                            </select>
                            <div class="password-field">
                                <input type="password" id="newPasswordValue" placeholder="ูููุฉ ุงูุณุฑ ุงูุฌุฏูุฏุฉ">
                                <span class="toggle-password" id="toggleNewPassword">
                                    <i class="fas fa-eye"></i>
                                </span>
                            </div>
                            <button class="btn btn-warning" id="resetPasswordBtn">ุฅุนุงุฏุฉ ุชุนููู</button>
                        </div>
                    </div>
                </div>

                <!-- ูุญุชูู ุงููุณุงุจูุงุช -->
                <div class="tab-content" id="contests">
                    <h2>ุฅุฏุงุฑุฉ ุงููุณุงุจูุงุช <i class="fas fa-trophy emoji-icon"></i></h2>
                    <div class="controls">
                        <select id="contestMember">
                            ${renderMembersOptions()}
                        </select>
                        <input type="text" id="contestName" placeholder="ุงุณู ุงููุณุงุจูุฉ">
                        <select id="contestPoints">
                            <option value="1">1 Talanton</option>
                            <option value="2">2 Talanton</option>
                            <option value="3">3 Talanton</option>
                            <option value="5">5 Talanton</option>
                            <option value="10">10 Talanton</option>
                        </select>
                        <button class="btn btn-primary" id="addContestBtn">ุฅุถุงูุฉ Talanton ุงููุณุงุจูุฉ</button>
                    </div>
                    <table id="contestsTable">
                        <thead>
                            <tr>
                                <th class="member-number">#</th>
                                <th>ุงุณู ุงูุนุถู</th>
                                <th>ุงููุณุงุจูุฉ</th>
                                <th>ุงูุชุงูุงูุชูู</th>
                                <th>ุงูุชุงุฑูุฎ</th>
                                <th>ุญุฐู</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${renderContestsTable()}
                        </tbody>
                    </table>
                </div>

                <!-- ูุญุชูู ุฃุนูุงุฏ ุงููููุงุฏ -->
                <div class="tab-content" id="birthdays">
                    <h2>ุฃุนูุงุฏ ุงููููุงุฏ <i class="fas fa-birthday-cake emoji-icon"></i></h2>
                    
                    <div class="birthday-reminder" id="birthdayReminder">
                        <h3><i class="fas fa-bell"></i> ุชุฐููุฑ ุฃุนูุงุฏ ุงููููุงุฏ ุงููุงุฏูุฉ</h3>
                        <div id="upcomingBirthdays">${renderUpcomingBirthdays()}</div>
                    </div>
                    
                    <div class="controls">
                        <select id="birthdayMember">
                            ${renderMembersOptions()}
                        </select>
                        <input type="date" id="birthdayDate">
                        <button class="btn btn-primary" id="addBirthdayBtn">ุฅุถุงูุฉ ุนูุฏ ูููุงุฏ</button>
                    </div>
                    
                    <h3>ูุงุฆูุฉ ุฃุนูุงุฏ ุงููููุงุฏ</h3>
                    <table id="birthdaysTable">
                        <thead>
                            <tr>
                                <th class="member-number">#</th>
                                <th>ุงุณู ุงูุนุถู</th>
                                <th>ุชุงุฑูุฎ ุงููููุงุฏ</th>
                                <th>ุงูุฃูุงู ุงููุชุจููุฉ</th>
                                <th>ุชุนุฏูู</th>
                                <th>ุญุฐู</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${renderBirthdaysTable()}
                        </tbody>
                    </table>
                </div>

                <!-- ูุญุชูู ุงูููุงุณุจุงุช -->
                <div class="tab-content" id="events">
                    <h2>ุฅุฏุงุฑุฉ ุงูููุงุณุจุงุช <i class="fas fa-calendar-alt emoji-icon"></i></h2>
                    <div class="controls">
                        <input type="text" id="newEventName" placeholder="ุงุณู ุงูููุงุณุจุฉ">
                        <input type="date" id="newEventDate">
                        <input type="text" id="newEventDescription" placeholder="ูุตู ุงูููุงุณุจุฉ">
                        <button class="btn btn-primary" id="addEventBtn">ุฅุถุงูุฉ ููุงุณุจุฉ</button>
                    </div>
                    <table id="eventsTable">
                        <thead>
                            <tr>
                                <th class="member-number">#</th>
                                <th>ุงุณู ุงูููุงุณุจุฉ</th>
                                <th>ุงูุชุงุฑูุฎ</th>
                                <th>ุงููุตู</th>
                                <th>ุชุนุฏูู</th>
                                <th>ุญุฐู</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${renderEventsTable()}
                        </tbody>
                    </table>
                </div>

                <!-- ูุญุชูู ุงููููุงุช -->
                <div class="tab-content" id="tasks">
                    <h2>ุฅุฏุงุฑุฉ ุงููููุงุช <i class="fas fa-tasks emoji-icon"></i></h2>
                    <div class="controls">
                        <input type="text" id="newTaskName" placeholder="ุงุณู ุงููููุฉ">
                        <select id="newTaskAssignee">
                            ${renderMembersOptions()}
                        </select>
                        <input type="date" id="newTaskDeadline">
                        <select id="newTaskStatus">
                            <option value="ููุฏ ุงูุชูููุฐ">ููุฏ ุงูุชูููุฐ</option>
                            <option value="ููุชููุฉ">ููุชููุฉ</option>
                            <option value="ูุชุฃุฎุฑุฉ">ูุชุฃุฎุฑุฉ</option>
                        </select>
                        <button class="btn btn-primary" id="addTaskBtn">ุฅุถุงูุฉ ูููุฉ</button>
                    </div>
                    <table id="tasksTable">
                        <thead>
                            <tr>
                                <th class="member-number">#</th>
                                <th>ุงุณู ุงููููุฉ</th>
                                <th>ุงููุณุคูู</th>
                                <th>ุงูููุนุฏ ุงูููุงุฆู</th>
                                <th>ุงูุญุงูุฉ</th>
                                <th>ุชุนุฏูู</th>
                                <th>ุญุฐู</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${renderTasksTable()}
                        </tbody>
                    </table>
                </div>

                <!-- ูุญุชูู ุฅุฏุงุฑุฉ Talanton -->
                <div class="tab-content" id="talantonAdmin">
                    <h2>ุฅุฏุงุฑุฉ Talanton <i class="fas fa-coins"></i></h2>
                    
                    <div class="controls">
                        <h3>ุฅุฌูุงูู Talanton ูู ุงููุธุงู: <span id="totalTalantonSystem">${calculateTotalTalanton()}</span></h3>
                    </div>
                    
                    <div class="report-section">
                        <h3>ุญุฑูุงุช ุงูุชุงูุงูุชูู</h3>
                        <div class="controls">
                            <button class="btn btn-info" id="exportTalantonBtn">ุชุตุฏูุฑ ุญุฑูุงุช ุงูุชุงูุงูุชูู</button>
                        </div>
                        <div id="allTransactions">
                            ${renderAllTransactions()}
                        </div>
                    </div>
                </div>

                <!-- ูุญุชูู ุงูุชูุงุฑูุฑ -->
                <div class="tab-content" id="reports">
                    <h2>ุงูุชูุงุฑูุฑ ูุงูุฅุญุตุงุฆูุงุช</h2>
                    
                    <div class="report-section">
                        <h3>๐ ุฅุญุตุงุฆูุงุช ุนุงูุฉ</h3>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon"><i class="fas fa-users"></i></div>
                                <div class="stat-number" id="reportMembers">${members.length}</div>
                                <div class="stat-label">ุฅุฌูุงูู ุงูุฃุนุถุงุก</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon"><i class="fas fa-calendar-week"></i></div>
                                <div class="stat-number" id="reportWeeks">${weeks.length}</div>
                                <div class="stat-label">ุนุฏุฏ ุงูุฃุณุงุจูุน</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon"><i class="fas fa-check-circle"></i></div>
                                <div class="stat-number" id="reportAttendance">${attendanceRecords.length}</div>
                                <div class="stat-label">ุฅุฌูุงูู ุงูุญุถูุฑ</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon"><i class="fas fa-star"></i></div>
                                <div class="stat-number" id="reportPoints">${calculateTotalTalanton()}</div>
                                <div class="stat-label">Talanton ุงูููููุญุฉ</div>
                            </div>
                        </div>
                    </div>

                    <div class="export-buttons">
                        <button class="btn btn-success" id="exportAttendanceBtn">
                            <i class="fas fa-file-excel"></i> ุชุตุฏูุฑ ุชูุฑูุฑ ุงูุญุถูุฑ
                        </button>
                        <button class="btn btn-info" id="exportMembersBtn">
                            <i class="fas fa-file-csv"></i> ุชุตุฏูุฑ ุจูุงูุงุช ุงูุฃุนุถุงุก
                        </button>
                        <button class="btn btn-warning" id="exportTalantonReportBtn">
                            <i class="fas fa-file-alt"></i> ุชุตุฏูุฑ ุชูุฑูุฑ ุงูุชุงูุงูุชูู
                        </button>
                    </div>
                </div>
            `;

            // ุฅุถุงูุฉ ูุณุชูุนู ุงูุฃุญุฏุงุซ ููุงุฌูุฉ ุงูุฃุฏูู
            setupAdminEventListeners();
        }

        // ุฅุนุฏุงุฏ ูุณุชูุนู ุฃุญุฏุงุซ ูุงุฌูุฉ ุงูุฃุฏูู
        function setupAdminEventListeners() {
            // ุงูุนูุฏุฉ ุฅูู ูุงุฌูุฉ ุงููุณุชุฎุฏู
            document.getElementById('backToUserView').addEventListener('click', backToUserView);
            
            // ุชุตุฏูุฑ ุงูุจูุงูุงุช
            document.getElementById('exportDataBtn').addEventListener('click', exportData);
            document.getElementById('backupDataBtn').addEventListener('click', backupData);
            
            // ุฅุฏุงุฑุฉ ุงูุฃุนุถุงุก
            document.getElementById('addMemberBtn').addEventListener('click', addMember);
            
            // ุฅุฏุงุฑุฉ ุงูุฃุณุงุจูุน
            document.getElementById('addWeekBtn').addEventListener('click', addWeek);
            
            // ุฅุฏุงุฑุฉ ุงูุญุถูุฑ
            document.getElementById('deleteAttendanceBtn').addEventListener('click', deleteAttendance);
            document.getElementById('addExtraPointsBtn').addEventListener('click', addExtraPoints);
            
            // ุงูุฃูุงู ูุงูุชุญูู
            document.getElementById('saveSecuritySettings').addEventListener('click', saveSecuritySettings);
            document.getElementById('changeAdminPasswordBtn').addEventListener('click', changeAdminPassword);
            document.getElementById('resetPasswordBtn').addEventListener('click', resetPassword);
            
            // ุงููุณุงุจูุงุช
            document.getElementById('addContestBtn').addEventListener('click', addContest);
            
            // ุฃุนูุงุฏ ุงููููุงุฏ
            document.getElementById('addBirthdayBtn').addEventListener('click', addBirthday);
            
            // ุงูููุงุณุจุงุช
            document.getElementById('addEventBtn').addEventListener('click', addEvent);
            
            // ุงููููุงุช
            document.getElementById('addTaskBtn').addEventListener('click', addTask);
            
            // ุฅุฏุงุฑุฉ Talanton
            document.getElementById('exportTalantonBtn').addEventListener('click', exportTalanton);
            
            // ุงูุชูุงุฑูุฑ
            document.getElementById('exportAttendanceBtn').addEventListener('click', exportAttendance);
            document.getElementById('exportMembersBtn').addEventListener('click', exportMembers);
            document.getElementById('exportTalantonReportBtn').addEventListener('click', exportTalantonReport);
            
            // ุชุจููุจุงุช ุงูุฃุฏูู
            document.querySelectorAll('#adminTabs .tabs .tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    switchAdminTab(tabId);
                });
            });
            
            // ุฅุถุงูุฉ ูุณุชูุนู ุงูุฃุญุฏุงุซ ููุฃุฒุฑุงุฑ ุงูุฏููุงููููุฉ
            setTimeout(() => {
                setupDynamicEventListeners();
            }, 500);
        }

        // ุฅุนุฏุงุฏ ูุณุชูุนู ุงูุฃุญุฏุงุซ ููุฃุฒุฑุงุฑ ุงูุฏููุงููููุฉ
        function setupDynamicEventListeners() {
            // ูุณุชูุนู ุงูุฃุญุฏุงุซ ููุฃุฒุฑุงุฑ ุงูุฏููุงููููุฉ ูู ุฌุฏูู ุงูุฃุนุถุงุก
            document.querySelectorAll('.editMember').forEach(btn => {
                btn.addEventListener('click', () => {
                    const memberId = btn.getAttribute('data-id');
                    editMember(memberId);
                });
            });
            
            document.querySelectorAll('.deleteMember').forEach(btn => {
                btn.addEventListener('click', () => {
                    const memberId = btn.getAttribute('data-id');
                    deleteMember(memberId);
                });
            });
            
            // ูุณุชูุนู ุงูุฃุญุฏุงุซ ููุฃุฒุฑุงุฑ ุงูุฏููุงููููุฉ ูู ุฌุฏูู ุงูุฃุณุงุจูุน
            document.querySelectorAll('.editWeek').forEach(btn => {
                btn.addEventListener('click', () => {
                    const weekId = btn.getAttribute('data-id');
                    editWeek(weekId);
                });
            });
            
            document.querySelectorAll('.deleteWeek').forEach(btn => {
                btn.addEventListener('click', () => {
                    const weekId = btn.getAttribute('data-id');
                    deleteWeek(weekId);
                });
            });
            
            // ูุณุชูุนู ุงูุฃุญุฏุงุซ ููุฃุฒุฑุงุฑ ุงูุฏููุงููููุฉ ูู ุฌุฏูู ุงููุณุงุจูุงุช
            document.querySelectorAll('.deleteContest').forEach(btn => {
                btn.addEventListener('click', () => {
                    const contestId = btn.getAttribute('data-id');
                    deleteContest(contestId);
                });
            });
            
            // ูุณุชูุนู ุงูุฃุญุฏุงุซ ููุฃุฒุฑุงุฑ ุงูุฏููุงููููุฉ ูู ุฌุฏูู ุฃุนูุงุฏ ุงููููุงุฏ
            document.querySelectorAll('.editBirthday').forEach(btn => {
                btn.addEventListener('click', () => {
                    const birthdayId = btn.getAttribute('data-id');
                    editBirthday(birthdayId);
                });
            });
            
            document.querySelectorAll('.deleteBirthday').forEach(btn => {
                btn.addEventListener('click', () => {
                    const birthdayId = btn.getAttribute('data-id');
                    deleteBirthday(birthdayId);
                });
            });
            
            // ูุณุชูุนู ุงูุฃุญุฏุงุซ ููุฃุฒุฑุงุฑ ุงูุฏููุงููููุฉ ูู ุฌุฏูู ุงูููุงุณุจุงุช
            document.querySelectorAll('.editEvent').forEach(btn => {
                btn.addEventListener('click', () => {
                    const eventId = btn.getAttribute('data-id');
                    editEvent(eventId);
                });
            });
            
            document.querySelectorAll('.deleteEvent').forEach(btn => {
                btn.addEventListener('click', () => {
                    const eventId = btn.getAttribute('data-id');
                    deleteEvent(eventId);
                });
            });
            
            // ูุณุชูุนู ุงูุฃุญุฏุงุซ ููุฃุฒุฑุงุฑ ุงูุฏููุงููููุฉ ูู ุฌุฏูู ุงููููุงุช
            document.querySelectorAll('.editTask').forEach(btn => {
                btn.addEventListener('click', () => {
                    const taskId = btn.getAttribute('data-id');
                    editTask(taskId);
                });
            });
            
            document.querySelectorAll('.deleteTask').forEach(btn => {
                btn.addEventListener('click', () => {
                    const taskId = btn.getAttribute('data-id');
                    deleteTask(taskId);
                });
            });
        }

        // ูุธุงุฆู ุงูุชุจููุจุงุช
        function switchTab(tabId) {
            // ุฅุฎูุงุก ุฌููุน ุงููุญุชููุงุช
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // ุฅูุบุงุก ุชูุดูุท ุฌููุน ุงูุชุจููุจุงุช
            document.querySelectorAll('.tabs .tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // ุฅุธูุงุฑ ุงููุญุชูู ุงููุญุฏุฏ
            document.getElementById(tabId).classList.add('active');
            
            // ุชูุดูุท ุงูุชุจููุจ ุงููุญุฏุฏ
            document.querySelector(`.tabs .tab[data-tab="${tabId}"]`).classList.add('active');
        }

        function switchAdminTab(tabId) {
            // ุฅุฎูุงุก ุฌููุน ูุญุชููุงุช ุงูุฃุฏูู
            document.querySelectorAll('#adminTabs .tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // ุฅูุบุงุก ุชูุดูุท ุฌููุน ุชุจููุจุงุช ุงูุฃุฏูู
            document.querySelectorAll('#adminTabs .tabs .tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // ุฅุธูุงุฑ ูุญุชูู ุงูุฃุฏูู ุงููุญุฏุฏ
            document.getElementById(tabId).classList.add('active');
            
            // ุชูุดูุท ุชุจููุจ ุงูุฃุฏูู ุงููุญุฏุฏ
            document.querySelector(`#adminTabs .tabs .tab[data-tab="${tabId}"]`).classList.add('active');
        }

        // ูุธุงุฆู ุชุณุฌูู ุงูุฏุฎูู
        function showAdminLogin() {
            document.getElementById('adminLoginModal').style.display = 'flex';
        }

        function hideAdminLogin() {
            document.getElementById('adminLoginModal').style.display = 'none';
        }

        function confirmAdminLogin() {
            const password = document.getElementById('adminPassword').value;
            if (password === adminPassword) {
                hideAdminLogin();
                showAdminInterface();
                showNotification('ุชู ุชุณุฌูู ุฏุฎูู ุงูุฃุฏูู ุจูุฌุงุญ');
            } else {
                document.getElementById('adminPassword').classList.add('login-failed');
                setTimeout(() => {
                    document.getElementById('adminPassword').classList.remove('login-failed');
                }, 500);
                showNotification('ูููุฉ ุงูุณุฑ ุบูุฑ ุตุญูุญุฉ', false);
            }
        }

        function showAdminInterface() {
            // ุฅุฎูุงุก ูุงุฌูุฉ ุงููุณุชุฎุฏู
            document.getElementById('userAttendance').style.display = 'none';
            document.getElementById('userReports').style.display = 'none';
            document.getElementById('talantonStore').style.display = 'none';
            document.getElementById('adminLoginBtn').style.display = 'none';
            
            // ุชุญููู ูุฅุธูุงุฑ ูุงุฌูุฉ ุงูุฃุฏูู
            loadAdminInterface();
            document.getElementById('adminTabs').style.display = 'block';
        }

        function backToUserView() {
            // ุฅุฎูุงุก ูุงุฌูุฉ ุงูุฃุฏูู
            document.getElementById('adminTabs').style.display = 'none';
            
            // ุฅุธูุงุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู
            document.getElementById('userAttendance').style.display = 'block';
            document.getElementById('userReports').style.display = 'none';
            document.getElementById('talantonStore').style.display = 'none';
            document.getElementById('adminLoginBtn').style.display = 'block';
            
            // ุชูุนูู ุงูุชุจููุจ ุงูุฃูู
            switchTab('userAttendance');
        }

        // ูุธุงุฆู ุชุญููู ุงูุจูุงูุงุช
        function loadMembersFromFirebase() {
            const membersRef = database.ref('members');
            membersRef.on('value', (snapshot) => {
                const data = snapshot.val();
                members = [];
                
                if (data) {
                    Object.keys(data).forEach(key => {
                        members.push({
                            id: key,
                            name: data[key].name,
                            points: data[key].points || 0,
                            password: data[key].password || '1234'
                        });
                    });
                }
                
                // ุชุญุฏูุซ ูุงุฌูุฉ ุงููุณุชุฎุฏู
                updateSelectMember();
                
                // ุชุญุฏูุซ ูุงุฌูุฉ ุงูุฃุฏูู ุฅุฐุง ูุงูุช ุธุงูุฑุฉ
                if (document.getElementById('adminTabs').style.display === 'block') {
                    updateMembersTable();
                }
            });
        }

        function loadWeeksFromFirebase() {
            const weeksRef = database.ref('weeks');
            weeksRef.on('value', (snapshot) => {
                const data = snapshot.val();
                weeks = [];
                
                if (data) {
                    Object.keys(data).forEach(key => {
                        weeks.push({
                            id: key,
                            name: data[key].name,
                            date: data[key].date || new Date().toISOString()
                        });
                    });
                }
                
                // ุชุญุฏูุซ ูุงุฌูุฉ ุงูุฃุฏูู ุฅุฐุง ูุงูุช ุธุงูุฑุฉ
                if (document.getElementById('adminTabs').style.display === 'block') {
                    updateWeeksTable();
                }
            });
        }

        // ูุธุงุฆู ุงูุนุฑุถ
        function renderMembersTable() {
            if (members.length === 0) {
                return '<tr><td colspan="5" style="text-align: center;">ูุง ุชูุฌุฏ ุฃุนุถุงุก</td></tr>';
            }
            
            return members.map((member, index) => `
                <tr>
                    <td class="member-number">${index + 1}</td>
                    <td>${member.name}</td>
                    <td>${member.points || 0}</td>
                    <td>
                        <button class="btn btn-primary editMember" data-id="${member.id}">
                            ุชุนุฏูู
                        </button>
                    </td>
                    <td>
                        <button class="btn btn-danger deleteMember" data-id="${member.id}">
                            ุญุฐู
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        function renderWeeksTable() {
            if (weeks.length === 0) {
                return '<tr><td colspan="5" style="text-align: center;">ูุง ุชูุฌุฏ ุฃุณุงุจูุน</td></tr>';
            }
            
            return weeks.map((week, index) => `
                <tr>
                    <td class="member-number">${index + 1}</td>
                    <td>${week.name}</td>
                    <td>${new Date(week.date).toLocaleDateString('ar-EG')}</td>
                    <td>
                        <button class="btn btn-primary editWeek" data-id="${week.id}">
                            ุชุนุฏูู
                        </button>
                    </td>
                    <td>
                        <button class="btn btn-danger deleteWeek" data-id="${week.id}">
                            ุญุฐู
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        function renderWeeksOptions() {
            let options = '<option value="">-- ุงุฎุชุฑ ุฃุณุจูุน --</option>';
            weeks.forEach(week => {
                options += `<option value="${week.id}">${week.name}</option>`;
            });
            return options;
        }

        function renderMembersOptions() {
            let options = '<option value="">-- ุงุฎุชุฑ ุนุถู --</option>';
            members.forEach(member => {
                options += `<option value="${member.id}">${member.name}</option>`;
            });
            return options;
        }

        // ูุธุงุฆู ุงูุฃุนุถุงุก
        function addMember() {
            const name = document.getElementById('newMemberName').value;
            const emoji = document.getElementById('newMemberEmoji').value;
            const password = document.getElementById('newMemberPassword').value;
            
            if (!name) {
                showNotification('ูุฑุฌู ุฅุฏุฎุงู ุงุณู ุงูุนุถู', false);
                return;
            }
            
            const membersRef = database.ref('members');
            const newMemberRef = membersRef.push();
            
            newMemberRef.set({
                name: `${emoji} ${name}`,
                password: password || '1234',
                points: 0
            }).then(() => {
                showNotification('ุชู ุฅุถุงูุฉ ุงูุนุถู ุจูุฌุงุญ');
                document.getElementById('newMemberName').value = '';
                document.getElementById('newMemberPassword').value = '';
            }).catch(error => {
                console.error('Error adding member:', error);
                showNotification('ูุดู ูู ุฅุถุงูุฉ ุงูุนุถู', false);
            });
        }

        function editMember(memberId) {
            const member = members.find(m => m.id === memberId);
            if (!member) return;
            
            const newName = prompt('ุฃุฏุฎู ุงูุงุณู ุงูุฌุฏูุฏ:', member.name);
            if (newName) {
                const memberRef = database.ref('members/' + memberId);
                memberRef.update({
                    name: newName
                }).then(() => {
                    showNotification('ุชู ุชุนุฏูู ุงูุนุถู ุจูุฌุงุญ');
                }).catch(error => {
                    console.error('Error updating member:', error);
                    showNotification('ูุดู ูู ุชุนุฏูู ุงูุนุถู', false);
                });
            }
        }

        function deleteMember(memberId) {
            const member = members.find(m => m.id === memberId);
            if (!member) return;
            
            if (confirm(`ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ุงูุนุถู "${member.name}"ุ`)) {
                const memberRef = database.ref('members/' + memberId);
                memberRef.remove().then(() => {
                    showNotification('ุชู ุญุฐู ุงูุนุถู ุจูุฌุงุญ');
                }).catch(error => {
                    console.error('Error deleting member:', error);
                    showNotification('ูุดู ูู ุญุฐู ุงูุนุถู', false);
                });
            }
        }

        // ูุธุงุฆู ุงูุฃุณุงุจูุน
        function addWeek() {
            const name = document.getElementById('newWeekName').value;
            const date = document.getElementById('newWeekDate').value;
            
            if (!name) {
                showNotification('ูุฑุฌู ุฅุฏุฎุงู ุงุณู ุงูุฃุณุจูุน', false);
                return;
            }
            
            const weeksRef = database.ref('weeks');
            const newWeekRef = weeksRef.push();
            
            newWeekRef.set({
                name: name,
                date: date || new Date().toISOString()
            }).then(() => {
                showNotification('ุชู ุฅุถุงูุฉ ุงูุฃุณุจูุน ุจูุฌุงุญ');
                document.getElementById('newWeekName').value = '';
                document.getElementById('newWeekDate').value = '';
            }).catch(error => {
                console.error('Error adding week:', error);
                showNotification('ูุดู ูู ุฅุถุงูุฉ ุงูุฃุณุจูุน', false);
            });
        }

        function editWeek(weekId) {
            const week = weeks.find(w => w.id === weekId);
            if (!week) return;
            
            const newName = prompt('ุฃุฏุฎู ุงูุงุณู ุงูุฌุฏูุฏ:', week.name);
            const newDate = prompt('ุฃุฏุฎู ุงูุชุงุฑูุฎ ุงูุฌุฏูุฏ (YYYY-MM-DD):', week.date.substring(0, 10));
            
            if (newName && newDate) {
                const weekRef = database.ref('weeks/' + weekId);
                weekRef.update({
                    name: newName,
                    date: newDate
                }).then(() => {
                    showNotification('ุชู ุชุนุฏูู ุงูุฃุณุจูุน ุจูุฌุงุญ');
                }).catch(error => {
                    console.error('Error updating week:', error);
                    showNotification('ูุดู ูู ุชุนุฏูู ุงูุฃุณุจูุน', false);
                });
            }
        }

        function deleteWeek(weekId) {
            const week = weeks.find(w => w.id === weekId);
            if (!week) return;
            
            if (confirm(`ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ุงูุฃุณุจูุน "${week.name}"ุ`)) {
                const weekRef = database.ref('weeks/' + weekId);
                weekRef.remove().then(() => {
                    showNotification('ุชู ุญุฐู ุงูุฃุณุจูุน ุจูุฌุงุญ');
                }).catch(error => {
                    console.error('Error deleting week:', error);
                    showNotification('ูุดู ูู ุญุฐู ุงูุฃุณุจูุน', false);
                });
            }
        }

        // ูุธุงุฆู ุงูุญุถูุฑ
        function deleteAttendance() {
            const weekId = document.getElementById('attendanceWeekSelect').value;
            if (!weekId) {
                showNotification('ูุฑุฌู ุงุฎุชูุงุฑ ุฃุณุจูุน ุฃููุงู', false);
                return;
            }
            
            if (confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ุฌููุน ุณุฌูุงุช ุงูุญุถูุฑ ููุฐุง ุงูุฃุณุจูุนุ')) {
                showNotification('ุฌุงุฑู ุญุฐู ุณุฌูุงุช ุงูุญุถูุฑ...');
                // ููุง ุณูุชู ุญุฐู ุณุฌูุงุช ุงูุญุถูุฑ ูู Firebase
                setTimeout(() => {
                    showNotification('ุชู ุญุฐู ุณุฌูุงุช ุงูุญุถูุฑ ุจูุฌุงุญ');
                }, 1500);
            }
        }

        function addExtraPoints() {
            const memberId = document.getElementById('extraPointMember').value;
            const points = parseInt(document.getElementById('extraPointsValue').value);
            const reason = document.getElementById('extraPointsReason').value;
            
            if (!memberId || !points || !reason) {
                showNotification('ูุฑุฌู ููุก ุฌููุน ุงูุญููู', false);
                return;
            }
            
            const member = members.find(m => m.id === memberId);
            if (!member) {
                showNotification('ุงูุนุถู ุงููุญุฏุฏ ุบูุฑ ููุฌูุฏ', false);
                return;
            }
            
            const memberRef = database.ref('members/' + memberId);
            const newPoints = (member.points || 0) + points;
            
            memberRef.update({
                points: newPoints
            }).then(() => {
                showNotification(`ุชู ุฅุถุงูุฉ ${points} ููุทุฉ ููุนุถู ${member.name}`);
                document.getElementById('extraPointsValue').value = '1';
                document.getElementById('extraPointsReason').value = '';
            }).catch(error => {
                console.error('Error adding points:', error);
                showNotification('ูุดู ูู ุฅุถุงูุฉ ุงูููุงุท', false);
            });
        }

        // ูุธุงุฆู ุงูุฃูุงู ูุงูุชุญูู
        function saveSecuritySettings() {
            const securityLevel = document.getElementById('securityLevel').value;
            showNotification('ุชู ุญูุธ ุฅุนุฏุงุฏุงุช ุงูุฃูุงู ุจูุฌุงุญ');
        }

        function changeAdminPassword() {
            const currentPassword = document.getElementById('currentAdminPassword').value;
            const newPassword = document.getElementById('newAdminPassword').value;
            const confirmPassword = document.getElementById('confirmAdminPassword').value;
            
            if (!currentPassword || !newPassword || !confirmPassword) {
                showNotification('ูุฑุฌู ููุก ุฌููุน ุงูุญููู', false);
                return;
            }
            
            if (currentPassword !== adminPassword) {
                showNotification('ูููุฉ ุงูุณุฑ ุงูุญุงููุฉ ุบูุฑ ุตุญูุญุฉ', false);
                return;
            }
            
            if (newPassword !== confirmPassword) {
                showNotification('ูููุฉ ุงูุณุฑ ุงูุฌุฏูุฏุฉ ุบูุฑ ูุชุทุงุจูุฉ', false);
                return;
            }
            
            adminPassword = newPassword;
            showNotification('ุชู ุชุบููุฑ ูููุฉ ุงูุณุฑ ุจูุฌุงุญ');
            
            // ูุณุญ ุงูุญููู
            document.getElementById('currentAdminPassword').value = '';
            document.getElementById('newAdminPassword').value = '';
            document.getElementById('confirmAdminPassword').value = '';
        }

        function resetPassword() {
            const memberId = document.getElementById('resetMemberPassword').value;
            const newPassword = document.getElementById('newPasswordValue').value;
            
            if (!memberId || !newPassword) {
                showNotification('ูุฑุฌู ุงุฎุชูุงุฑ ุนุถู ูุฅุฏุฎุงู ูููุฉ ุงูุณุฑ ุงูุฌุฏูุฏุฉ', false);
                return;
            }
            
            const member = members.find(m => m.id === memberId);
            if (!member) {
                showNotification('ุงูุนุถู ุงููุญุฏุฏ ุบูุฑ ููุฌูุฏ', false);
                return;
            }
            
            const memberRef = database.ref('members/' + memberId);
            memberRef.update({
                password: newPassword
            }).then(() => {
                showNotification(`ุชู ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงูุณุฑ ููุนุถู ${member.name}`);
                document.getElementById('newPasswordValue').value = '';
            }).catch(error => {
                console.error('Error resetting password:', error);
                showNotification('ูุดู ูู ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงูุณุฑ', false);
            });
        }

        // ูุธุงุฆู ุงููุณุงุจูุงุช
        function addContest() {
            const memberId = document.getElementById('contestMember').value;
            const contestName = document.getElementById('contestName').value;
            const points = parseInt(document.getElementById('contestPoints').value);
            
            if (!memberId || !contestName) {
                showNotification('ูุฑุฌู ุงุฎุชูุงุฑ ุนุถู ูุฅุฏุฎุงู ุงุณู ุงููุณุงุจูุฉ', false);
                return;
            }
            
            const member = members.find(m => m.id === memberId);
            if (!member) {
                showNotification('ุงูุนุถู ุงููุญุฏุฏ ุบูุฑ ููุฌูุฏ', false);
                return;
            }
            
            // ุฅุถุงูุฉ ุงููุณุงุจูุฉ ุฅูู Firebase
            showNotification(`ุชู ุฅุถุงูุฉ ${points} ููุทุฉ ููุนุถู ${member.name} ุนู ูุณุงุจูุฉ ${contestName}`);
            document.getElementById('contestName').value = '';
        }

        function deleteContest(contestId) {
            if (confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฐู ุงููุณุงุจูุฉุ')) {
                showNotification('ุชู ุญุฐู ุงููุณุงุจูุฉ ุจูุฌุงุญ');
            }
        }

        // ูุธุงุฆู ุฃุนูุงุฏ ุงููููุงุฏ
        function addBirthday() {
            const memberId = document.getElementById('birthdayMember').value;
            const date = document.getElementById('birthdayDate').value;
            
            if (!memberId || !date) {
                showNotification('ูุฑุฌู ุงุฎุชูุงุฑ ุนุถู ูุชุงุฑูุฎ ุงููููุงุฏ', false);
                return;
            }
            
            const member = members.find(m => m.id === memberId);
            if (!member) {
                showNotification('ุงูุนุถู ุงููุญุฏุฏ ุบูุฑ ููุฌูุฏ', false);
                return;
            }
            
            // ุฅุถุงูุฉ ุนูุฏ ุงููููุงุฏ ุฅูู Firebase
            showNotification(`ุชู ุฅุถุงูุฉ ุนูุฏ ูููุงุฏ ููุนุถู ${member.name}`);
            document.getElementById('birthdayDate').value = '';
        }

        function editBirthday(birthdayId) {
            const newDate = prompt('ุฃุฏุฎู ุชุงุฑูุฎ ุงููููุงุฏ ุงูุฌุฏูุฏ (YYYY-MM-DD):');
            if (newDate) {
                showNotification('ุชู ุชุนุฏูู ุชุงุฑูุฎ ุงููููุงุฏ ุจูุฌุงุญ');
            }
        }

        function deleteBirthday(birthdayId) {
            if (confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ุชุงุฑูุฎ ุงููููุงุฏุ')) {
                showNotification('ุชู ุญุฐู ุชุงุฑูุฎ ุงููููุงุฏ ุจูุฌุงุญ');
            }
        }

        // ูุธุงุฆู ุงูููุงุณุจุงุช
        function addEvent() {
            const name = document.getElementById('newEventName').value;
            const date = document.getElementById('newEventDate').value;
            const description = document.getElementById('newEventDescription').value;
            
            if (!name || !date || !description) {
                showNotification('ูุฑุฌู ููุก ุฌููุน ุงูุญููู', false);
                return;
            }
            
            // ุฅุถุงูุฉ ุงูููุงุณุจุฉ ุฅูู Firebase
            showNotification('ุชู ุฅุถุงูุฉ ุงูููุงุณุจุฉ ุจูุฌุงุญ');
            document.getElementById('newEventName').value = '';
            document.getElementById('newEventDate').value = '';
            document.getElementById('newEventDescription').value = '';
        }

        function editEvent(eventId) {
            const newName = prompt('ุฃุฏุฎู ุงุณู ุงูููุงุณุจุฉ ุงูุฌุฏูุฏ:');
            if (newName) {
                showNotification('ุชู ุชุนุฏูู ุงูููุงุณุจุฉ ุจูุฌุงุญ');
            }
        }

        function deleteEvent(eventId) {
            if (confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ุงูููุงุณุจุฉุ')) {
                showNotification('ุชู ุญุฐู ุงูููุงุณุจุฉ ุจูุฌุงุญ');
            }
        }

        // ูุธุงุฆู ุงููููุงุช
        function addTask() {
            const name = document.getElementById('newTaskName').value;
            const assigneeId = document.getElementById('newTaskAssignee').value;
            const deadline = document.getElementById('newTaskDeadline').value;
            const status = document.getElementById('newTaskStatus').value;
            
            if (!name || !assigneeId || !deadline || !status) {
                showNotification('ูุฑุฌู ููุก ุฌููุน ุงูุญููู', false);
                return;
            }
            
            const member = members.find(m => m.id === assigneeId);
            if (!member) {
                showNotification('ุงูุนุถู ุงููุญุฏุฏ ุบูุฑ ููุฌูุฏ', false);
                return;
            }
            
            // ุฅุถุงูุฉ ุงููููุฉ ุฅูู Firebase
            showNotification('ุชู ุฅุถุงูุฉ ุงููููุฉ ุจูุฌุงุญ');
            document.getElementById('newTaskName').value = '';
            document.getElementById('newTaskAssignee').value = '';
            document.getElementById('newTaskDeadline').value = '';
            document.getElementById('newTaskStatus').value = 'ููุฏ ุงูุชูููุฐ';
        }

        function editTask(taskId) {
            const newName = prompt('ุฃุฏุฎู ุงุณู ุงููููุฉ ุงูุฌุฏูุฏ:');
            if (newName) {
                showNotification('ุชู ุชุนุฏูู ุงููููุฉ ุจูุฌุงุญ');
            }
        }

        function deleteTask(taskId) {
            if (confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ุงููููุฉุ')) {
                showNotification('ุชู ุญุฐู ุงููููุฉ ุจูุฌุงุญ');
            }
        }

        // ูุธุงุฆู ุฅุฏุงุฑุฉ Talanton
        function calculateTotalTalanton() {
            return members.reduce((total, member) => total + (member.points || 0), 0);
        }

        function exportTalanton() {
            showNotification('ุฌุงุฑู ุชุตุฏูุฑ ุญุฑูุงุช Talanton...');
        }

        // ูุธุงุฆู ุงูุชูุงุฑูุฑ
        function exportAttendance() {
            showNotification('ุฌุงุฑู ุชุตุฏูุฑ ุชูุฑูุฑ ุงูุญุถูุฑ...');
        }

        function exportMembers() {
            showNotification('ุฌุงุฑู ุชุตุฏูุฑ ุจูุงูุงุช ุงูุฃุนุถุงุก...');
        }

        function exportTalantonReport() {
            showNotification('ุฌุงุฑู ุชุตุฏูุฑ ุชูุฑูุฑ Talanton...');
        }

        // ูุธุงุฆู ูุณุงุนุฏุฉ
        function showNotification(message, isSuccess = true) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.background = isSuccess ? '#2ecc71' : '#e74c3c';
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        // ูุธุงุฆู ุงูุนุฑุถ ุงููุณุงุนุฏุฉ (ุณูุชู ุชูููุฐูุง ูุงุญูุงู)
        function renderAttendanceTable() {
            return '<tr><td colspan="4" style="text-align: center;">ูุง ุชูุฌุฏ ุณุฌูุงุช ุญุถูุฑ</td></tr>';
        }

        function renderContestsTable() {
            return '<tr><td colspan="6" style="text-align: center;">ูุง ุชูุฌุฏ ูุณุงุจูุงุช</td></tr>';
        }

        function renderUpcomingBirthdays() {
            return '<p>ูุง ุชูุฌุฏ ุฃุนูุงุฏ ูููุงุฏ ูุฑูุจุฉ</p>';
        }

        function renderBirthdaysTable() {
            return '<tr><td colspan="6" style="text-align: center;">ูุง ุชูุฌุฏ ุฃุนูุงุฏ ูููุงุฏ</td></tr>';
        }

        function renderEventsTable() {
            return '<tr><td colspan="6" style="text-align: center;">ูุง ุชูุฌุฏ ููุงุณุจุงุช</td></tr>';
        }

        function renderTasksTable() {
            return '<tr><td colspan="7" style="text-align: center;">ูุง ุชูุฌุฏ ูููุงุช</td></tr>';
        }

        function renderAllTransactions() {
            return '<p>ูุง ุชูุฌุฏ ุญุฑูุงุช Talanton</p>';
        }

        // ุจุฏุก ุงูุชุทุจูู ุนูุฏ ุชุญููู ุงูุตูุญุฉ
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>
